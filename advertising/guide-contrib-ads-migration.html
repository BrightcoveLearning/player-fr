---
title: 'Guide : migration des annonces contrib'
parent: Advertising
description: 'In this topic, you will learn about some points when migrating to the the latest version of <strong>contrib-annonces</strong>.'
---

<article class="bcls-article">
  <h1>Guide : Migration contrib-ads</h1>
  <summary>{{ page.description }}</summary>
  <section id="Overview" class="bcls-section">
    <h2>Présentation</h2>
    <p>L'une des meilleures fonctionnalités de Video.js est la communauté de plugins et personnalisations qui s'est construit autour d'elle. Le support publicitaire est une partie importante de cet écosystème, mais tous les auteurs de plug-ins n'écrivent pas avec des publicités à l'esprit. Brightcove apporte de grands changements <a href="//github.com/videojs/videojs-contrib-ads">videojs-contrib-ads</a> pour rendre les publicités plus compatibles avec le reste de l'univers Video.js. Dans la version 2.0 du plugin, le plugin redistribue des événements avec des préfixes différents selon qu'une annonce est en cours de lecture ou non. Lors de la lecture d'une annonce, les événements sont précédés du préfixe <strong>un d</strong> et lorsque le contenu reprend après une coupure publicitaire, les événements sont précédés du préfixe <strong>contenu</strong>. Par exemple, un <code translate="No">pause</code> événement pendant une annonce deviendrait un <code translate="No">adpause</code> un événement. Cela signifie du point de vue d'un auteur de plugin (non publicitaire), Video.js se comportera exactement de la même manière que les annonces soient diffusées ou non. Et si quelqu'un veut écrire un plugin qui est sensible aux annonces, ces événements originaux sont toujours disponibles pour qu'ils puissent se connecter.</p>
  </section>
  <section id="migrationprocedures" class="bcls-section">
    <h2>Procédures de migration</h2>
    <p>Si vous avez écrit votre propre intégration publicitaire en plus de <a href="//github.com/videojs/videojs-contrib-ads">videojs-contrib-ads</a> , vous devez effectuer quelques actions pour préparer la mise à niveau:</p>
    <ul>
      <li>Appliquez le préfixe approprié à vos gestionnaires d'événements. Si vous écoutiez <code translate="No">timeupdate</code> événements pendant la lecture de l'annonce, vous devriez maintenant être à l'écoute <code translate="No">adtimeupdate</code>. Les événements vidéo qui se produisent pendant la lecture du contenu ne sont pas affectés.</li>
      <li>Écouter <code translate="No">contentended</code> pour déclencher des postrolls au lieu de <code translate="No">ended</code>. Lorsque le contenu est en cours de lecture, le <code translate="No">ended</code> l'événement est capturé et redistribué en tant que <code translate="No">contentended</code> afin que les autres plugins ne voient pas plusieurs <code translate="No">ended</code> événements pour la même vidéo. Une fois le contenu et les posttrolls terminés, les contrib-ads déclencheront un <code translate="No">ended</code> un événement.</li>
      <li>Conseillez à vos utilisateurs d'inclure et d'initialiser votre plugin avant qu'ils ne déclenchent d'autres plugins. Le plugin contrib-ads s'occupera de réexpédier les événements, mais il ne peut pas les cacher pour les plugins qui sont enregistrés plus tôt dans la chaîne d'écoute.</li>
      <li>La prise en charge étendue des postrolls a ajouté un nouveau <code translate="No">postrollTimeout</code> option, similaire aux prerolls. Si vous ne souhaitez pas lire un postroll pour une vidéo, vous pouvez <code translate="No">adtimeout</code> pour passer immédiatement à la vidéo suivante.</li>
    </ul>
  </section>
</article>