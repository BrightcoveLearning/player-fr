---
title: 'Démarrage du saut : Annonce pré-roll'
parent: Advertising
description: Enter values for the three form fields below to see a pre-roll ad appear before your video. (If you choose not to input your data, demo data is fourni.)</p>
    <p>Sous le lecteur, le code de l'implémentation du lecteur est affiché pour que vous puissiez copier et utiliser.
---

<article class="bcls-article">
  <h1>Démarrage du saut : Publicités pré-roll</h1>
  <summary>{{ page.description }}</summary>
  <style type="text/css">
.video-js { width: 640px; height: 360px; } .bcls-code { color: #111; font-family: 'Source Code Pro', monospace; padding: 1em; width: 90%; min-height: 5em; background-color: #cfcfcf; font-size: 1rem; } .bcls-bouton { padding: .5em; background-color: #64AAB2; border: 1px black solid; border-radius: .5em; color: black; cursor: pointer; } ensemble de champs { color: #64AAB2; border: 1px #64AAB2 solid; border-radius: .5em; } code { color: #E4B842; font-family: 'Source Code Pro', monospace; }
</style>
  <link href="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet" />
  <div id="inputFields" class="input-fields">
    <h3>Informations sur le compte</h3>
    <div id="accountInfo">
      <table class="bcls-table">
        <tbody class="bcls-table__body">
          <tr>
            <td>ID de compte Video Cloud :</td>
            <td><input id="accountID" type="text" size="60" value="1507807800001" /></td>
          </tr>
          <tr>
            <td>ID de la vidéo :</td>
            <td><input id="videoID" type="text" size="60" value="5622718636001" /></td>
          </tr>
          <tr>
            <td>URL du serveur publicitaire :</td>
            <td><input id="adServerURL" type="text" size="60" value="https://solutions.brightcove.com/bcls/brightcove-player/vmap/simple-vast.xml" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <p>
    <button id="buildPlayer" class="bcls-button" onclick="addPlayer()">Construire le joueur</button>
  </p>
  <h3>Lecteur</h3>
  <div style="width: 640px;height: 360px;">
    <div id="placeHolder" style="width: 640px;height: 360px;background-color: #cfcfcf;">&nbsp;</div>
  </div>
  <h3>Code de publication</h3>
  <p>
    <button id="copyCode" class="bcls-button" onclick="copyCode()">Copier le code dans le presse-papiers</button>
  </p>
  <div>
    <textarea id="publishingCode" class="bcls-code" style="width: 100%;height: 420px" onclick="this.select()"></textarea>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.5/beautify.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.5/beautify-css.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.5/beautify-html.min.js"></script><!-- custom script --><script type="text/JavaScript">
  var myPlayer, playerHTML, playerScript, publishingCode = document.getElementById('publishingCode'), accountID = document.getElementById('accountID'), videoID = document.getElementById('videoID'), adServerURL = document.getElementById('adServerURL') , options = {} ; // Construisez le lecteur et placez-le dans le DOM HTML function addPlayer() { options.accountID = accountID.value; options.videoID = videoID.value; options.adServerURL = adServerURL.value; console.log('options', options); // Construire dynamiquement l'élément vidéo du lecteur playerHTML = '&lt;video-js id=\\"myPlayerID\\" data-video-id=\\"' + options.videoID + '\\" data-account=\\"' + options.accountID + '\\" data-player=\\"default\\" data-embed=\\"default\\" class=\\"video-js\\" contrôles&gt;</video-js>'; // Injectez le code du lecteur dans le DOM document.getElementById('placeHolder').innerHTML = playerHTML; // Ajoutez et exécutez la balise de script du lecteur playerScript = document.createElement('script'); playerScript.src = "//players.brightcove.net/" + options.accountID + "/default_default/index.min.js"; document.body.appendChild(playerScript); playerScript.onload = rappel ; } // Initialiser le lecteur et démarrer la fonction vidéo callback() { var ima = document.createElement('script'); ima.src = '//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js'; document.body.appendChild(ima); myPlayer = bc('myPlayerID'); ima.onload = function () { myPlayer.ima3({ // debug to true to see console messages debug: true, // set the requestMode to onload requestMode: "onload", // this is where your ad tag goes serverUrl: options.adServerURL }); } buildHTML(); } function buildHTML() { var htmlText1, htmlText2, jsText, allFormattedCode; htmlText1 = '<!doctype html><html><head><meta charset="UTF-8"><title>Jouer un préroll</title><!-- Page styles --><style>.video-js {width: 640px; height: 360px;}</style><link href="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet"></head><body>' htmlText1 += playerHTML; htmlText1 += playerScript.outerHTML; htmlText1 += '<script src="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js">\\&lt;/script\\&gt;' htmlText1 += '<script>'; jsText = 'var myPlayer = videojs.getPlayer("myPlayerID");myPlayer.ready(function(){myPlayer.ima3({ debug: true,requestMode: "onload",serverUrl: "' + options.adServerURL + '"})});'; htmlText2 = ' \\&lt;/script\\&gt; </body> </html>'; HTMLText1 = html_beautify (HTMLText1, { "indent_size": 2 }) ; JSTExt = js_beautify (JSTExt, { "indent_size": 2, "indent_level": 10 }) ; HTMLText2 = html_beautify (HTMLText2, { "indent_size": 2 }) ; AllFormattedCode = HTMLText1 +' \ n' + JSTExt + '\ n' + HTMLText2 ; PublishingCode.TextContent = AllFormattedCode ;} fonction CopyCode () { publishingCode.select(); document.execCommand('copy'); }
</script> 
</article>