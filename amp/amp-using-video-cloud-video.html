---
title: AMP utilisant une vidéo Video Cloud
parent: amp
description: In this topic, you will learn how Accelerated Mobile Pages (AMP) can be used with Brightcove Player.
---

<article class="bcls-article">
    <h1>AMP à l'aide d'une vidéo Video Cloud</h1>
    <summary>{{ page.description }}</summary>
    <section class="bcls-section">
        <aside class="bcls-aside bcls-aside--warning">Ce document utilise AMP avec Brightcove Player version 6 et une vidéo Video Cloud. Si vous n'êtes pas un client de Video Cloud, consultez <a href="/amp/amp-using-external-video.html">AMP utilisant une vidéo externe</a>.</aside>
        <h2 id="Overview">Présentation</h2>
        <p>Accelerated Mobile Pages est un projet Google qui vise à permettre « la création de sites Web et d'annonces toujours rapides, beaux et performants sur tous les appareils et plateformes de distribution ». Vous pouvez utiliser Brightcove Player avec AMP car le projet comprend un <code translate="No">amp-brightcove</code> composant qui permet aux éditeurs d'intégrer Brightcove Players dans des documents HTML AMP.</p>
    </section>
    <section class="bcls-section">
        <h2 id="Sample">Exemple</h2>
        <p>Voici un exemple de page HTML AMP qui inclut un lecteur Brightcove Player. Le lecteur fonctionne normalement, donc le code HTML est la partie intéressante de cet exemple. Le code HTML est examiné plus loin dans ce document.</p>
        <p class="codepen" data-height="330" data-theme-id="34967" data-default-tab="html,result" data-user="rcrooks1969" data-slug-hash="ddKwre" style="height: 330px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="AMP Example"><span>Voir le stylo <a href="https://codepen.io/team/rcrooks1969/pen/ddKwre/"> Exemple AMP</a> par Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969"> rcrooks1969</a> ) sur <a href="https://codepen.io">CodePen</a>.</span></p>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
        <aside class="bcls-aside bcls-aside--warning">Notez qu'en raison du fonctionnement de l'AMP, vous devez examiner attentivement ses limites avant utilisation. Par exemple :
            <ul>
                <li>AMP a des règles très strictes sur ce que HTML peut et ne peut pas être utilisé sur une page. Les détails à ce sujet peuvent être consultés dans la spécification <a href="https://www.ampproject.org/docs/reference/spec">AMP HTML</a>.</li>
                <li>Brightcove Analytics ne signalera pas correctement la page de référence pour les pages AMP - à la place <code translate="No">referrer_domain</code> sera vide, et <code translate="No">source_type</code> sera enregistré comme <code translate="No">direct</code>.</li>
                <li>Peu d'attributs utilisés avec l'implémentation avancée de Brightcove Player (sur la page) sont valides avec <code translate="No">&lt;amp-brightcove ..&gt;</code>. Vérifier la <a href="https://www.ampproject.org/docs/reference/spec">Spécification AMP HTML</a> pour ceux qui peuvent être utilisés.</li>
                <li>AMP ne fonctionnera pas avec les joueurs restreints de domaine.</li>
            </ul>
        </aside>
    </section>
    <section class="bcls-section">
        <h2 id="Player_configuration">Configuration du lecteur</h2>
        <p>Brightcove fournit un plugin que vous voudrez charger pour améliorer l'utilisation d'AMP avec Brightcove Player. Le plugin ajoute la prise en charge de l'API d'interface vidéo d'AMP dont AMP a besoin&nbsp;pour contrôler le lecteur dans le document AMP. Il permet également à certains&nbsp;fonctionnalités avancées:</p>
        <ul>
            <li><strong>Intégration avec amp-analytics</strong>: Permet le suivi des vues vers des analyses tierces par rapport au domaine de la page AMP.</li>
            <li><strong>Intégration avec amp-bind</strong>: La lecture peut être contrôlée par d'autres éléments de la page AMP.</li>
        </ul>
        <p>Les joueurs sans plugin peuvent ne pas se comporter comme prévu dans un document AMP.</p>
        <h3><strong>Installation du plug-in</strong></h3>
        <aside class="bcls-aside bcls-aside--warning">Vous DEVEZ installer le plugin. Dans le passé, AMP fonctionnerait sans ajouter le plugin. Ce n'est plus vrai.</aside>
        <p>Comme pour tous les plugins Brightcove Player, vous avez besoin du nom et de l'URL du plugin vers le JavaScript du plugin, qui sont fournis ici (aucun fichier CSS n'est nécessaire pour l'utilisation de ce plugin) :</p>
        <h4>Nom du plugin</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">ampSupport</code></pre>
        <h4>URL JavaScript</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">//players.brightcove.net/videojs-amp-support/1/videojs-amp-support.js</code></pre>
        <p>Pour implémenter le plugin AMP, vous allez ajouter le nom de fonction du plugin et l'URL au JavaScript du plugin:</p>
        <ol class="bcls-tasklist">
            <li>Dans Studio, ouvrez le <strong>JOUEURS</strong> module et créez un nouveau lecteur ou localisez le lecteur auquel vous souhaitez ajouter le plugin.</li>
            <li>Cliquez sur le lien du lecteur pour ouvrir les propriétés du lecteur.</li>
            <li>Cliquez sur <strong>Plugins</strong> dans le menu de navigation de gauche.</li>
            <li>Cliquez ensuite sur <strong>Plugins</strong> dans les trois options.
                <figure class="bcls-figure"><img class="bcls-image" alt="Select Plugin" src="/assets/images/amp/amp-vc-players-plugin-options.png" /></figure>
            </li>
            <li>Dans le menu <strong>Ajouter un plugin</strong> , sélectionnez <strong>Plugin personnalisé</strong>.</li>
            <li>Pour le <strong>Nom du plugin</strong> entrer <code translate="No">ampSupport</code>.</li>
            <li>Pour le <strong>JavaScript</strong> URL, saisissez :
                <pre>
  <code class="language-json" translate="No">//players.brightcove.net/videojs-amp-support/1/videojs-amp-support.js</code></pre>
            </li>
            <li>Vous n'avez pas besoin de saisir de CSS ou d'options pour ce plugin.
                <figure class="bcls-figure"><img class="bcls-image" alt="Install plugin" src="/assets/images/amp/amp-vc-studio-install-plugin.png" /></figure>
            </li>
            <li>Cliquez sur <strong>Save</strong>.</li>
            <li>Pour publier le lecteur, cliquez sur <strong>Publier et intégrer &gt; Publier les modifications</strong>.</li>
            <li>Pour fermer la boîte de dialogue ouverte, cliquez sur <strong>Fermer</strong>.</li>
        </ol>
    </section>
    <section class="bcls-section">
        <h2 id="Resources_from_AMP">Ressources de l'AMP</h2>
        <p>Le projet AMP a développé un <code translate="No">amp-brightcove</code> composant spécial qui affiche le lecteur Brightcove. Le composant est détaillé dans le document <a href="https://www.ampproject.org/docs/reference/components/amp-brightcove">amp-brightcove.</a></p>
        <p>AMP fournit un exemple d' <code translate="No">amp-brightcove</code> implémentation avec des détails dans les documents suivants :</p>
        <ul>
            <!-- 2 links below broken - couldn't find an replacements, but leaving it in place in case someone else can -->
            <!-- <li><a href="https://ampbyexample.com/components/amp-brightcove/">amp-brightcove</a></li> -->
            <li><a href="https://github.com/ampproject/amp-by-example/blob/master/src/20_Components/amp-brightcove.html">amp-par exemple</a></li>
            <!-- <li><a href="https://ampbyexample.com/playground/#url=https%3A%2F%2Fampbyexample.com%2Fcomponents%2Famp-brightcove%2Fsource%2F">AMP Playground</a></li> -->
        </ul>
    </section>
    <section class="bcls-section">
        <h2 id="Code_examination">Examen du code</h2>
        <p>Le code de l'exemple CodePen ci-dessus est illustré ci-dessous. Une explication complète du code est fournie par AMP dans les documents mentionnés ci-dessus. Dans la liste suivante, vous trouverez quelques astuces/pièges à prendre en compte :</p>
        <ul>
            <li>Ligne 20 : NE PAS embellir le code. Le CSS standard est nécessaire tel que fourni par AMP.</li>
            <li>Ligne 35 : le <code translate="No">width</code> et <code translate="No">height</code> Les attributs déterminent le rapport hauteur / largeur du lecteur intégré dans les mises en page réactives.</li>
        </ul>
        <pre class="line-numbers" data-start="1">
  <code class="language-html" translate="No">&lt;!--
    ## Introduction

    The `amp-brightcove` component allows embedding a Brightcove
    [Video Cloud](https://www.brightcove.com/en/online-video-platform) or
    [Perform](https://www.brightcove.com/en/perform) player.
  --&gt;
  &lt;!-- --&gt;
  &lt;!doctype html&gt;
  &lt;html ⚡&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;amp-brightcove&lt;/title&gt;
    &lt;script async src="https://cdn.ampproject.org/v0.js"&gt;&lt;/script&gt;
    &lt;!-- ## Setup --&gt;
    &lt;!-- Import the Brightcove component in the header. --&gt;
    &lt;script async custom-element="amp-brightcove" src="https://cdn.ampproject.org/v0/amp-brightcove-0.1.js"&gt;&lt;/script&gt;
    &lt;meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"&gt;
    &lt;link rel="canonical" href="https://ampbyexample.com/components/amp-brightcove/"&gt;
    &lt;style amp-boilerplate&gt;body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style&gt;&lt;noscript&gt;&lt;style amp-boilerplate&gt;body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style&gt;&lt;/noscript&gt;

  &lt;/head&gt;
  &lt;body&gt;

    &lt;!-- ## Basic Usage --&gt;
    &lt;!--
      A responsive brightcove video. The required data is `data-account` and `data-video-id`. Other
      supported parameters are `data-player-id`, `data-embed` and `data-playlist-id`.
    --&gt;
    &lt;amp-brightcove
      data-account="1752604059001"
      data-video-id="5715315990001"
      data-player-id="H1xW7NWcz"
      layout="responsive"
      width="16" height="9"&gt;
    &lt;/amp-brightcove&gt;

  &lt;/body&gt;
  &lt;/html&gt;</code></pre>
    </section>
    <section class="bcls-section">
        <h2 id="Features">Fonctionnalités</h2>
        <p>Bien que discutées dans la documentation sur les SAP, quelques caractéristiques sont soulignées ici qui revêtent une importance particulière :</p>
        <!-- These are features that are common to both Video Cloud and external videos -->
        <!-- THIS SECTION CAN BE ADDED TO THEN COPIED TO SIMILAR SECTION IN EXTERNAL VIDEO FEATURES SECTION -->

        <h3 id="Custom_parameters">Paramètres personnalisés</h3>
        <p>Vous voudrez peut-être transmettre des informations supplémentaires à votre lecteur pour que vos plugins puissent y accéder. Pour ce faire, ajoutez des attributs supplémentaires à l' <code translate="No">amp-brightcove</code> élément qui doit être nommé <code translate="No">data-param-*</code>, où <code translate="No">*</code> est le nom de votre propriété.</p>
        <p>Les paramètres sont transmis sous forme de noms d'attributs camel ajoutés à l'URL du lecteur. Les clés et les valeurs sont encodées en URL. Par exemple :</p>
        <ul>
            <li><code translate="No">data-param-language="de"</code> devient <code translate="No">&amp;language=de</code></li>
            <li><code translate="No">data-param-ad-vars="key:val;key2:val2"</code> devient <code translate="No">&amp;adVars=key%3Aval%3Bkey2%3Aval2</code></li>
        </ul>
        <h3 id="dock">station d'accueil (image dans l'image)</h3>
        <p>le <code translate="No">dock</code> L'attribut "ancrera" le joueur lorsqu'il défilerait hors de vue. Le lecteur est réduit et déplacé vers le coin supérieur droit de la page Web. Notez que les normes HTML désignent cette fonctionnalité comme <strong>image dans l'image</strong>. Une capture d'écran d'un lecteur ancré suit:</p>
        <figure class="bcls-figure"><img class="bcls-image" alt="dock" src="/assets/images/amp/amp-vc-amp-dock.png" /></figure>
        <p>Pour implémenter cette fonctionnalité, vous devez procéder comme suit:</p>
        <ol>
            <li>Incluez un script qui contient le code de la fonction d'ancrage, comme indiqué dans l'extrait de code suivant à la ligne 2.</li>
            <li>Ajouter le <code translate="No">dock</code> attribut au <code translate="No">&lt;amp-brightcove&gt;</code> tag, comme indiqué à la ligne 13.</li>
        </ol>
        <pre class="line-numbers" data-start="1">
  <code class="language-html" translate="No">...
      <span class="bcls-highlight">&lt;script async custom-element="amp-video-docking" src="https://cdn.ampproject.org/v0/amp-video-docking-0.1.js"&gt;&lt;/script&gt;</span>
  &lt;/head&gt;
  &lt;body&gt;

  ...
      &lt;amp-brightcove
      data-account="1752604059001"
      data-video-id="5715315990001"
      data-player-id="H1xW7NWcz"
      layout="responsive"
      width="16" height="9"
      <span class="bcls-highlight">dock</span>&gt;
    &lt;/amp-brightcove&gt;
    ...</code></pre>
        <h3>Prise en charge des référents externes</h3>
        <p>Brightcove Player v6.25.0+ prend en charge la définition d'un référent arbitraire sur un iframe. Le composant AMP prend désormais en charge le passage de son propre référent au lecteur, en ajoutant un <code translate="No">referrer="EXTERNAL_REFERRER"</code> attribut à son intégration amp-brightcove.</p>
        <p>EXTERNAL_REFERRER est la macro d'AMP. Voir <a href="https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer">https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer</a> pour plus d'informations.</p>
        <h3>Analytique AMP</h3>
        <p>Un composant <strong>amp-analytics</strong> peut être utilisé dans un document AMP pour effectuer le suivi des données vers n'importe quelle analyse arbitraire. Si les éditeurs souhaitent inclure des événements vidéo, ils peuvent désormais le faire.</p>
        <p>Le document d'AMP sur la syntaxe AMP Analytics (qui est encombrant) est ici : <a href="https://www.ampproject.org/docs/reference/components/amp-analytics">https://www.ampproject.org/docs/reference/components/amp-analytics</a>. Et plus précisément l'analyse vidéo : <a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md">https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md</a>.</p>
        <p>Un exemple est disponible, suivi vers <strong>exemple.com</strong> afin que vous verrez les balises sous forme d'erreurs dans l'onglet réseau : <a href="http://solutions.brightcove.com/bclifford/ampexamples/analytics.html">http://solutions.brightcove.com/bclifford/ampexamples/analytics.html</a>.</p>
        <h3>Liaison AMP</h3>
        <p>AMP Bind est l'API d'AMP pour interagir entre les composants. Au niveau de base, il vous permet d'avoir quelque chose d'extérieur au lecteur pour contrôler la lecture. Par exemple, le code suivant lirait une vidéo, où <code translate="No">myPlayer</code> se trouve le <code translate="No">id</code> lecteur amp-brightcove.</p>
        <pre class="line-numbers">
    <code class="language-html" translate="No">&lt;button on="tap:myPlayer.play"&gt;Play&lt;/button&gt;</code></pre>
        <p>AMP ne fait pas confiance aux événements vidéo, donc vous ne pouvez pas faire quelque chose de plus utile, comme agir sur une extrémité vidéo. Un exemple de ceci est disponible ici : <a href="http://solutions.brightcove.com/bclifford/ampexamples/bind.html">http://solutions.brightcove.com/bclifford/ampexamples/bind.html</a>.</p>
        <!-- END OF COMMON FEATURES -->
        <!-- These are features unique to Video Cloud videos and NOT shared with external videos -->

<!--         <h3>Advertising</h3>
        <p>Advertising, including prerolls, works in players used in AMP. The ad plugin and its configuration just needs to be included in the player's configuration. If you need to include article-specific values in your ad server calls, you can pass custom data through to a player plugin as described later in this document.</p>
        <p>AMP is very strict in what can be added to a valid AMP page, as detailed in the <a href="/amp/amp-using-video-cloud-video.html">AMP Using a Video Cloud Video</a> document. For example, you CANNOT use the standard practice of adding an <code translate="No">id</code> to the <code translate="No">amp-brightcove</code> tag then use a <code translate="No">script</code> block to configure, for instance, the IMA3 plugin. To reiterate, advertising must be implemented in the player's configuration, either using Studio or the Player Management API.</p>
        <p>If you wish to use ad configuration URLs that utilize an ad macro such as <code translate="No">{pageVariable.<span class="bcls-highlight">adId</span>}</code>, you must alter the player's configuration. You can use a custom parameter like:</p>
        <pre class="line-numbers">
  <code class="language-html" translate="No">data-param-ad-id="preonlybumper"</code></pre>
        <p>This does not make the value automatically available to the ad macro <code translate="No">{pageVariable.adId}</code>. To make the <code translate="No">ad-id/adId</code> property available to the ad URL, you must use Brightcove Player's <a href="/general/player-configuration-guide.html#query_string_to_window">query_string_to_window</a> configuration option. This option controls the population of the global namespace (window) variables from query string parameters. To add all query parameters to the global namespace, add the following to your player configuration:
            <pre class="line-numbers">
<code class="language-bash" translate="No">"query_string_to_window": {
  "target": "queryStringParams"
}</code></pre>
            <p>Note the <code translate="no">queryStringsParams</code> name is the "variable" in which the parameters will be stored, and you can change the name as you choose.</p>
            <p>If for some reason you prefer to only assign limited parameters to the global namespace you can do so. For instance, to make only the <code class="language-html" translate="No">data-param-<span class="bcls-highlight">ad-id</span>="..."</code> available to the plugin, you add the following to the player configuration:</p>
            <pre class="line-numbers">
<code class="language-bash" translate="No">"query_string_to_window": {
  "globals": [
    "adId"
  ]
}</code></pre>
            <p>For specific instructions on updating a player configuration see <a href="https://apis.support.brightcove.com/player-management/references/reference.html#operation/UpdatePlayerConfiguration">Player Configurations - Update a Player Configuration</a> from the Player Management API reference.</p>
 -->            <h3>Coiffer le joueur</h3>
            <p>Si vous souhaitez styliser le lecteur, vous devez utiliser une syntaxe spéciale pour le faire. Par exemple, si vous souhaitez définir la taille du lecteur, vous créez un <code translate="No">style</code> bloquer comme illustré et entourer le lecteur d'un <code translate="No">div</code> , comme indiqué ici:</p>
            <pre class="line-numbers">
  <code class="language-html" translate="No">&lt;style <span class="bcls-highlight">amp-custom</span>&gt;
    .player-container {
      width: 640px;
      height: 360px;
    }
  &lt;/style&gt;&lt;/code&gt;&lt;/pre&gt;

  ...

  &lt;div class="player-container"&gt;
    &lt;amp-brightcove
      data-account="1752604059001"
      data-video-id="5715315990001"
      data-player-id="H1xW7NWcz"
      layout="responsive"
      width="16" height="9"&gt;
    &lt;/amp-brightcove&gt;
  &lt;/div&gt;</code></pre>
            <p>Vous pouvez ajouter une seule <code translate="No">style</code> balise, mais elle doit inclure l' <code translate="No">amp-custom</code> attribut.</p>
    </section>

    <section class="bcls-section">
        <h2 id="Error_suppression">Suppression des erreurs pour les bots</h2>
        <p>Lorsqu'un bot qui ne prend pas en charge AMP parcourt une page contenant le lecteur vidéo AMP, une erreur vidéo défaillante est générée. Cela peut nuire au classement SEO. Vous pouvez utiliser le <code translate="No">suppressNotSupportedError</code> option dans la configuration JSON du Brightcove Player pour empêcher cela de se produire. Ajoutez ce qui suit pour supprimer ces fausses erreurs:</p>
        <pre class="line-numbers"><code class="language-json" translate="No">"suppress_not_supported_error": true</code></pre>
        <aside class="bcls-aside bcls-aside--warning">Pour que cela fonctionne, vous devez être sur Brightcove Player version 6.38.4 ou ultérieure.</aside>
    </section>

</article>