<video-js id="myPlayerID" 
  data-video-id="4784521906001" 
  data-account="1752604059001" 
  data-player="ryeOJ8f5dZ" 
  data-embed="default"
  data-application-id 
  class="video-js" 
  controls></video-js>
<script src="https://players.brightcove.net/1752604059001/ryeOJ8f5dZ_default/index.min.js"></script>

<script>
  var myPlayer, timeoutID, removeCTATime; videojs.getPlayer('myPlayerID').ready(function() { var cuePointAra = [], allCuePointData; myPlayer = this; // Hide overlay initially myPlayer.addClass("hide-overlay"); // +++ Listen for cue change then pass data to be displayed +++ myPlayer.on("loadstart", function(evt) { cuePointAra = myPlayer.mediainfo.cue_points; console.log(cuePointAra); var tt = myPlayer.textTracks()[0]; // When a cue point starts, extract cue data and pass data to be displayed tt.oncuechange = function() { if (tt.activeCues[0] !== undefined) { allCuePointData = getSubArray( cuePointAra, "time", tt.activeCues[0].startTime ); displayCTA(allCuePointData[0]); } } ; myPlayer.play(); }); // +++ Extraire les éléments de données des métadonnées du point de repère et afficher la superposition +++ function displayCTA(cpData) { // Diviser les métadonnées en un tableau de trois éléments en fonction de l'emplacement des points-virgules var dataAra = cpData.metadata.split(" ;"), durationCTA = dataAra[0], textCTA = dataAra[1], urlCTA = dataAra[2], // Construire dynamiquement la balise d'ancrage hrefCTA = '<a href="' +
        urlCTA +
        '"><span style="background-color: black; color: red;">' + texteCTA + "</span></a>", timeoutValue ; // Définir la durée, définir le délai d'expiration, injecter du code HTML dynamique et afficher la superposition timeoutValue = Number(durationCTA) * 1000 ; timeoutID = window.setTimeout(checkTime, timeoutValue); document.getElementsByClassName("vjs-overlay")[0 ].innerHTML = hrefCTA; myPlayer.removeClass("hide-overlay"); } // +++ Effacer le timeout et supprimer le overlay +++ // Cette fonction est appelée lorsque le timeout est atteint function checkTime() { window.clearTimeout(timeoutID); myPlayer.addClass("hide-overlay"); } // +++ Fonction d'assistance pour extraire les informations sur les points de repère +++ fonction getSubArray(targetArray, objProperty, value) { var i, totalItems = targetArray.length, objFound = false, idxArr = []; for (i = 0; i &lt; totalItems; i++) { if (targetArray[i][objProperty] === value) { objFound = true; idxArr.push(targetArray[i]); } } renvoie idxArr; } });

</script>