---
title: 'Étape par étape : Développement de plugins'
parent: Coding Topics
description: In this topic you will learn via a hands-on introduction about plugin development and use.
---

<article class="bcls-article">
  <h1>Étape par étape : Développement de plug-in</h1>
  <summary>{{ page.description }}</summary>
  <section id="developmentapproach" class="bcls-section">
    <h2>Approche de développement</h2>
    <p>Le JavaScript et le CSS que vous développez pour les plugins devront éventuellement être stockés dans un emplacement accessible sur Internet, mais il est recommandé de créer et de tester localement pendant le développement. Pour ce faire, vous exécuterez les opérations suivantes:</p>
    <ul>
      <li>Créez un fichier contenant le code de votre plugin JavaScript</li>
      <li>Créez un fichier pour contenir le code de votre plugin CSS (si nécessaire)</li>
      <li>Créez un fichier HTML pour le test. Utilisez le <code translate="No">embed_in_page</code> mise en œuvre pour le joueur</li>
      <li>Ajouter un <code translate="No">id</code> à la <code translate="No">&lt;video-js&gt;</code> marque</li>
      <li>Lien vers les pages JavaScript et CSS</li>
      <li>Utiliser un <code translate="No">&lt;script&gt;</code> tag pour appeler la fonction</li>
      <li>Développez et déboguez votre code</li>
    </ul>
    <p>Le reste de ce document vous guide à travers ces étapes pour créer et déployer un plugin simple.</p>
  </section>
  <section id="buildthebasics" class="bcls-section">
    <h2>Construisez les bases</h2>
    <p>Pour commencer le processus de création d'un plugin, vous devez effectuer certaines des étapes fondamentales de haut niveau mentionnées ci-dessus.</p>
    <ol class="bcls-tasklist">
      <li>Créez un dossier nommé <code translate="No">plugin-dev</code> qui peut être parcouru en utilisant un serveur HTTP réel. Le serveur est nécessaire pour les tests d'implémentation iframe plus loin dans ce document.</li>
      <li>Dans le dossier, créez trois fichiers avec les noms suivants:
        <ul>
          <li><strong translate="No">plugin-dev.html</strong> (Insérez les éléments de base d'une page HTML dans le fichier)</li>
          <li>plugin-dev.js<strong translate="No"></strong></li>
          <li>plugin-dev.css<strong translate="No"></strong></li>
        </ul>
      </li>
      <li>Utiliser les Studios <strong translate="No">Joueurs</strong> module, créez un nouveau lecteur.</li>
      <li class="video-cloud-only">Dans le <strong translate="No">Médias</strong> module, sélectionnez une vidéo et publiez-la avec le lecteur nouvellement créé.</li>
      <li class="player-only">En utilisant le <strong translate="No">CONTENU VIDÉO</strong> , associez une vidéo au lecteur, puis enregistrez et publiez le lecteur.</li>
      <li class="video-cloud-only">Copiez le <strong translate="No">Avancée</strong> code et collez-le dans le corps du <code translate="No">plugin-dev.html</code> page.</li>
      <li class="player-only">Du <strong translate="No">Code d'intégration et URL&gt; Joueur publié</strong> menu, copiez le <strong translate="No">Code d'intégration avancé</strong> code et collez-le dans le corps du <code translate="No">plugin-dev.html</code> page.</li>
      <li>Ajouter un <code translate="No">id</code> attribut au <code translate="No">&lt;video-js&gt;</code> balise avec une valeur de <code translate="No">player</code>.</li>
      <li>Vérifiez que votre page HTML ressemble à ce qui suit <span class="player-only">(Les clients Brightcove Player n'auront pas <code translate="No">data-video-id</code> propriété)</span>:
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Quick Start Plugin Dev&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;video-js id="player"
    data-video-id="4607746980001"
    data-account="1507807800001"
    data-player="Bk6LLayNQ"
    data-embed="default"
    class="video-js" controls&gt;&lt;/video&gt;
  &lt;script src="https://players.brightcove.net/1507807800001/Bk6LLayNQ_default/index.min.js"&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
      </li>
      <li>Parcourez la page pour vous assurer que votre vidéo est en cours de lecture.</li>
    </ol>
  </section>
  <section id="javascript" class="bcls-section">
    <h2>Créer JavaScript</h2>
    <p>Ensuite, vous allez créer et tester le code JavaScript pour créer une superposition pour la vidéo.</p>
    <ol class="bcls-tasklist">
      <li>Ouvrez le fichier <code translate="No">plugin-dev.js</code> et collez le code JavaScript suivant:
        <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginDev', function() {
  var player = this,
  overlay = document.createElement('p');
  overlay.className = 'vjs-overlay';
  overlay.innerHTML = "Becoming a plugin developer";
  player.el().appendChild(overlay);
});</code></pre>
        <aside class="bcls-aside bcls-aside--information">Remarque : pour la version 5.x et les lecteurs antérieurs, vous devez utiliser <code translate="No">videojs.plugin()</code> à la place de <code translate="No">videojs.registerPlugin()</code></aside>
      </li>
      <li>Vérifiez votre compréhension de chaque ligne insérée:
        <ul>
          <li>Les lignes 1 et 7 sont la syntaxe standard pour commencer et terminer un nouveau plugin de lecteur. Dans ce cas, le nom du plugin est <code translate="No">pluginDev</code>.</li>
          <li>La ligne 2 est un moyen standard d'avoir un moyen d'obtenir une poignée pour le joueur. Ceci est nécessaire pour appeler les méthodes du lecteur, ce que vous ferez plus tard.</li>
          <li>La ligne 3 crée un élément de paragraphe dans le document et l'affecte au <code translate="No">overlay</code> variable.</li>
          <li>La ligne 4 attribue une classe à la superposition qui sera utilisée plus tard en conjonction avec CSS.</li>
          <li>La ligne 5 ajoute du texte à l'élément de paragraphe.</li>
          <li>La ligne 6 utilise le <code translate="No">el()</code> méthode du lecteur pour récupérer l'élément DOM du lecteur, puis ajoute le nouvel élément de paragraphe à ce DOM.</li>
        </ul>
        <aside class="bcls-aside bcls-aside--information">Remarque : Le point-virgule de fin à la fin du code JavaScript du plugin (ligne 7 ci-dessus) est requis.</aside>
      </li>
      <li>Dans le fichier HTML, ajoutez le code suivant juste en dessous des <code translate="No">&lt;script&gt;</code> balises existantes. Ce code inclut le fichier JavaScript, puis appelle la méthode définie dans ce JavaScript.
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript" src="plugin-dev.js"&gt;&lt;/script&gt;
&lt;script&gt;videojs.getPlayer('myPlayerID').pluginDev();&lt;/script&gt;</code></pre>
      </li>
      <li>Parcourez à nouveau la page HTML et vous verrez que rien de visible n'a changé. Le problème est que la superposition est là, mais pas visible. Vous changerez cela plus tard.</li>
      <li>Pour vérifier que la superposition est présente, utilisez les outils de développement de votre navigateur. Dans le <em>Éléments</em> section, vérifiez le lecteur <code translate="No">&lt;div&gt;</code> élément, et vous verrez l'élément de paragraphe nouvellement inséré, comme indiqué ici :
        <figure class="bcls-figure"><img class="bcls-image" alt="quick-start-overlay-in-elements" src="/assets/images/coding-topics/sbs-plugin-quick-start-overlay-in-elements.png" /></figure>
      </li>
    </ol>
  </section>
  <section id="styletheplugin" class="bcls-section">
    <h2>Styliser le plugin</h2>
    <p>Vous savez que la superposition fait maintenant partie du lecteur, mais n'est pas visible. Ensuite, vous styliserez la superposition pour qu'elle devienne visible. Dans cette section du document, vous utiliserez un CSS très simple pour vous assurer que la superposition est visible.</p>
    <ol class="bcls-tasklist">
      <li>Ouvrez le fichier <code translate="No">plugin-dev.css</code> et collez dans les styles suivants:
        <pre class="line-numbers">
<code class="language-javascript" translate="No">.vjs-overlay {
    background-color: #333333;
    color: white;
    position: absolute;
    margin-top: 100px;
    margin-left: 20px;
}</code></pre>
      </li>
      <li>Dans le fichier HTML, ajoutez le code suivant juste en dessous de l'existant <code translate="No">&lt;link&gt;</code> marque. Ce code est lié à votre fichier CSS nouvellement créé.
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;link href="plugin-dev.css" rel="stylesheet"&gt;</code></pre>
      </li>
      <li>Parcourez la page HTML et vous verrez que la superposition est maintenant visible.
        <figure class="bcls-figure"><img class="bcls-image" alt="quick-start-overlay-showing" src="/assets/images/coding-topics/sbs-plugin-quick-start-overlay-showing.png" /></figure>
      </li>
    </ol>
  </section>
  <section id="passdatatoplugin" class="bcls-section">
    <h2>Transmettre les données au plugin</h2>
    <p>Il sera souvent le cas que vous souhaitiez modifier le comportement de votre plugin au moment de l'initialisation. Ceci est possible en passant des données dans le plugin en utilisant le <code translate="No">options</code> propriété. Dans cet exemple, vous passerez le texte à afficher dans la superposition.</p>
    <ol class="bcls-tasklist">
      <li>Ouvrez la page HTML et modifiez le <code translate="No">&lt;script&gt;</code> balises donc une variable nommée <code translate="No">options</code> est créé et affecté à un objet avec une paire clé-valeur de <em>"overlayText": "Ces données sont fournies à l'initialisation"</em>. Aussi, passez le <code translate="No">options</code> variable comme argument lors de l'appel de la <code translate="No">pluginDev()</code> méthode. Les modifications doivent apparaître comme suit:
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript" src="plugin-dev-copy.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
  <span class="bcls-highlight">var options = {"overlayText": "This data supplied at initialization"};</span>
&lt;/script&gt;
<span class="bcls-highlight">&lt;script&gt;videojs.getPlayer('myPlayerID').pluginDev(options);&lt;/script&gt;</span></code></pre>
      </li>
      <li>Vous devez maintenant modifier le JavaScript du plugin pour utiliser les données transmises à la fonction. La ligne 110 montre la fonction acceptant les données comme paramètre et la ligne 114 utilise les données de l'objet.
        <pre class="line-numbers">
<code class="language-javascript" translate="No"><span class="bcls-highlight">videojs.registerPlugin('pluginDev', function(options) {</span>
  var player = this,
  overlay = document.createElement('p');
  overlay.className = 'vjs-overlay';
  <span class="bcls-highlight">overlay.innerHTML = options.overlayText;</span>
  player.el().appendChild(overlay);
});</code></pre>
      </li>
      <li>Parcourez la page HTML et vous verrez le nouveau texte utilisé.
        <figure class="bcls-figure"><img class="bcls-image" alt="quick-start-options-showing" src="/assets/images/coding-topics/sbs-plugin-quick-start-options-showing.png" /></figure>
      </li>
    </ol>
    <aside class="bcls-aside bcls-aside--warning">Remarque : Le processus présenté dans cette section du document, y compris et l'appel du plugin via JavaScript, est à des fins de développement et utile pour la configuration initiale et les tests, mais n'est pas considéré comme une meilleure pratique. La meilleure pratique consiste à inclure le plugin dans votre Studio de configuration de lecteur (comme indiqué dans la section suivante) même si vous utilisez l'implémentation embed_in_page.</aside>
  </section>
  <section id="deploytheplugin" class="bcls-section">
    <h2>Déployer le plugin</h2>
    <p>Une fois que le plugin, le CSS et le lecteur fonctionnent correctement, vous devez déployer les actifs pour une utilisation correcte. Voici un aperçu des étapes requises pour le déploiement:</p>
    <ul>
      <li>Copiez / déplacez les fichiers JavaScript et CSS vers votre emplacement distant</li>
      <li>Utilisez Studio pour ajouter la configuration du plugin au lecteur.</li>
      <li>Créez un fichier HTML à tester et utilisez l'implémentation iframe pour le lecteur</li>
      <li>Tester les anomalies</li>
    </ul>
    <p>Vous allez maintenant être guidé à travers ces étapes.</p>
    <ol class="bcls-tasklist">
      <li>Déplacez les fichiers JavaScript et CSS de votre plugin vers un emplacement accessible sur Internet de votre choix. <aside class="bcls-aside bcls-aside--information">Si vous le souhaitez, vous pouvez utiliser les fichiers à l'emplacement indiqué ci-dessous dans l'exemple. Vous pouvez également utiliser le <a href="https://apis.support.brightcove.com/delivery-system/">API du système de livraison</a> pour stocker les fichiers dans votre propre référentiel.</aside>
      </li>
      <li>Dans le dossier dans lequel vous travaillez, créez un autre fichier appelé <code translate="No">plugin-dev-iframe.html</code>.</li>
      <li>Utiliser les Studios <strong translate="No">Joueurs</strong> module pour éditer le lecteur que vous avez créé précédemment.</li>
      <li>Cliquez sur <strong>Plugins</strong> dans le menu de navigation de gauche.</li>
      <li>Cliquez sur suivant <strong>Ajouter un plugin&gt; Plugin personnalisé</strong>.</li>
      <li>Pour le nom du <strong>plugin,</strong> entrez <code translate="No">pluginDev</code>.</li>
      <li>Pour le <strong>JavaScript</strong> URL, saisissez (ou votre URL):
        <pre>
 <code class="language-json" translate="No">https://solutions.brightcove.com/bcls/brightcove-player/plugins/plugin-dev.js</code></pre>
      </li>
      <li>Pour le <strong>CSS</strong> URL, saisissez (ou votre URL):
        <pre>
 <code class="language-json" translate="No">https://solutions.brightcove.com/bcls/brightcove-player/plugins/plugin-dev.css</code></pre>
      </li>
      <li>Entrez les options de configuration dans la zone de texte <strong>Options (JSON)</strong> .
        <pre class="line-numbers">
 <code class="language-json" translate="No">{"overlayText": "This data is supplied at initialization"}</code></pre>
      </li>
      <li>Votre boîte de dialogue de configuration doit ressembler à ce qui suit:
        <figure class="bcls-figure"><img class="bcls-image" alt="Plugins dialog" src="/assets/images/coding-topics/sbs-plugin-plugins-dialog.png" /></figure>
      </li>
      <li>Cliquez sur <strong>Save</strong>.</li>
      <li>Pour publier le lecteur, cliquez sur <strong>Publier et intégrer &gt; Publier les modifications</strong>.</li>
      <li>Pour fermer la boîte de dialogue ouverte, cliquez sur <strong>Fermer</strong>.</li>
      <li class="video-cloud-only">Dans le <strong translate="No">Médias</strong> module, sélectionnez une vidéo et publiez-la avec le lecteur nouvellement mis à jour et publié.</li>
      <li class="video-cloud-only">Copiez le <strong translate="No">Standard</strong> code et collez-le dans le corps du <code translate="No">plugin-dev-iframe.html</code> page. Votre page doit ressembler à ce qui suit :</li>
      <li class="player-only">Du <strong translate="No">Code d'intégration et URL&gt; Joueur publié</strong> menu, copiez le <strong translate="No">Code d'intégration standard</strong> code et collez-le dans le corps du <code translate="No">plugin-dev-iframe.html</code> page. Votre page doit ressembler à ce qui suit :
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Quick Start Plugin Dev - iframe&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;iframe src='https://players.brightcove.net/1507807800001/Bk6LLayNQ_default/index.html' allowfullscreen webkitallowfullscreen mozallowfullscreen&gt;&lt;/iframe&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
      </li>
      <li>Parcourez la page HTML et vous devriez voir le plugin fonctionner correctement avec l'iframe.</li>
    </ol>
  </section>
  <section id="3rdparty" class="bcls-section">
    <h2>Bibliothèques tierces</h2>
    <p>Si votre plugin a des dépendances sur des bibliothèques tierces, par exemple jQuery, vous devez les inclure de l'une de ces deux manières:</p>
    <ul>
      <li>Ajoutez la bibliothèque en tant qu'autre fichier JavaScript dans le <strong translate="No">Plugins</strong> section de <strong translate="No">Joueurs</strong> module dans <span class="video-cloud-only">Nuage vidéo</span> Studio.</li>
      <li>Ajouter plusieurs entrées dans le <strong translate="No">scripts</strong> section de la configuration du lecteur dans une instruction curl.</li>
    </ul>
    <p>Assurez-vous de mettre les bibliothèques dont dépend votre plugin avant l'entrée JavaScript de votre plugin dans les deux scénarios listés ci-dessus. L'ordre d'entrée est important.</p>
  </section>
</article>