---
title: "Restriction de la lecture vidéo à l'aide de l'adresse IP"
parent: 'Content Protection'
description: 'This topic provides an overview of how IP address restriction can be used to limit video distribution.'
---

<article class="bcls-article">
  <h1>Restriction de la lecture vidéo à l'aide d'une adresse IP</h1>
  <summary>{{ page.description }}</summary>
  <p><aside class="bcls-aside bcls-aside--information">La restriction d'adresse IP est disponible uniquement pour les éditeurs Video Cloud Enterprise.</aside></p>
  <section class="bcls-section">
    <h2 id="Overview">Présentation</h2>
    <p>Afin de limiter la lecture vidéo aux spectateurs internes uniquement, Video&nbsp;Les éditeurs Cloud Enterprise peuvent utiliser la restriction d'adresse IP. Cette approche empêche les lecteurs d'un compte de se charger, à moins que l'appareil qui lit la vidéo ne figure sur une liste d'adresses IP autorisées. C'est un niveau de sécurité supérieur à la <a href="https://studio.support.brightcove.com/players/configuring-player-content-restrictions.html#domains">restriction par domaine</a> ou à la <a href="https://studio.support.brightcove.com/players/configuring-player-content-restrictions.html#geofilter">restriction géographique</a>.</p>
    <p>La restriction d'adresses IP s'applique à toutes les vidéos du compte. Vous devrez utiliser un autre compte pour les vidéos et les lecteurs destinés au grand public.</p>
    <p>Lorsqu'un utilisateur essaie de charger une page qui contient un lecteur Video Cloud depuis une adresse qui ne figure pas sur la liste, le message d'erreur suivant s'affiche : « The video you are trying to watch cannot be viewed from your current country or location. » (La vidéo que vous essayez de regarder ne peut pas être affichée dans votre pays ou emplacement actuel).</p>
    <aside class="bcls-aside bcls-aside--information">Notez que lorsque la restriction IP est définie, elle prendra effet lorsque les temps de cache du lecteur seront atteints, ce qui peut aller jusqu'à deux heures.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="How_to_set_up_IP_address_restriction">Comment mettre en place la restriction d'adresses IP</h2>
    <p>Pour mettre en place une restriction d'adresses IP sur un de vos comptes Video Cloud, contactez le <a href="http://support.brightcove.com/en/contact">support Brightcove</a>. Vous devrez travailler avec le support pour identifier ou créer un compte à cet effet et fournir un fichier texte contenant votre liste blanche d'adresses IP.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Creating_an_IP_address_whitelist">Création d'une liste d'adresses IP autorisées</h2>
    <p>Pour créer une restriction d'adresses IP pour un de vos comptes Video Cloud, vous devez envoyer au support Brightcove une liste d'adresses IP autorisées à charger les lecteurs Video Cloud. La plupart des entreprises utilisent une ou plusieurs passerelles par lesquelles le trafic interne de l'entreprise atteint l'Internet extérieur.&nbsp;Votre liste blanche d'adresses IP doit inclure les adresses IP de toutes ces passerelles.</p>
    <p>La liste d'IP doit faire figurer chaque adresse IP sur une ligne séparée. Vous pouvez aussi y saisir des plages d'adresses IP. Par exemple :</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.40
38.39.23.48
38.39.23.50-38.112.23.69
38.39.23.100-38.112.23.199</code></pre>
    <p>Vous pouvez utiliser des masques de sous-réseau dans <a href="https://en.wikipedia.org/wiki/Dot-decimal_notation">Notation décimale à points</a> , tel que:</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.50/255.255.255.0</code></pre>
    <p>Vous pouvez également utiliser la <a target="_blank" href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">syntaxe de bloc CIDR</a>, telle que :</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.50|24</code></pre>
    <p>ou</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.50/24</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Video_Cloud_content">Contenu de Video Cloud</h2>
    <p>Lorsque vous utilisez l'API Playback pour récupérer du contenu à partir d'un compte Video Cloud configuré pour les restrictions IP, vous devez utiliser ce qui suit au lieu de l'URL standard:</p>
    <pre>
<code class="language-javascript" translate="No">https://edge-elb.api.brightcove.com/playback/v1</code></pre>
    <p>Utilisation <code translate="No">edge-elb.api...</code> vs la normale <code translate="No">edge.api...</code></p>
    <h3 id="Implementation_details">Détails de la mise</h3>
    <p>Lorsqu'un Brightcove Player est invité à charger une vidéo à partir d'un compte Video Cloud, il se connecte au catalogue à cette adresse:</p>
    <p><strong>https://edge.api.brightcove.com/playback/v1/</strong>.</p>
    <p>Voici comment cette URL se comporte:</p>
    <ul>
      <li>Lorsqu'il atteint Edge depuis l'Amérique du Nord, il atteint directement Edge et Edge voit l'adresse IP de l'utilisateur. Il peut autoriser ou refuser l'accès au catalogue conformément à la liste blanche Restriction IP. C'est le comportement souhaité.</li>
      <li>Lorsqu'il atteint Edge depuis l'extérieur de l'Amérique du Nord, il passe via Cloudfront pour des raisons de CDN d'équilibrage de charge / de mise en cache locale. Cela pose des problèmes car Edge voit l'adresse IP Cloudfront au lieu de l'adresse IP de l'utilisateur et refuse toutes les demandes. En effet, Cloudfront n'est pas sur la liste blanche (et cela ne devrait jamais être parce que toute personne utilisant Cloudfront y aurait accès).</li>
    </ul>
    <p>Il existe un autre point de terminaison pour Edge qui peut remédier à cette situation pour les clients non nord-américains. Le point final est:</p>
    <p><strong>edge-elb.api.brightcove.com</strong>.</p>
    <p>L'inconvénient de cette approche est qu'elle introduira un très léger retard dans la récupération du contenu mis en cache depuis l'extérieur des États-Unis, car les demandes de catalogue iront en Virginie aux États-Unis plutôt que via le réseau mondial de serveurs locaux de Cloudfront. Il est probable que cela soit à peine perceptible, mais cela vaut la peine d'être examiné et testé. Le contenu lui-même sera livré normalement à partir de serveurs locaux. Lors de l'accès depuis l'Amérique du Nord ou via un proxy nord-américain, il n'y aura aucun changement de performance.</p>
    <p>Si vous pensez que le léger retard vaut l'avantage, vous devez configurer tous les joueurs qui doivent accéder au compte IP restreint depuis l'extérieur de l'Amérique du Nord. Vous pouvez effectuer cette modification dans Studio dans le <strong>JOUEURS</strong> module. Les étapes suivantes vous guident tout au long du changement de configuration:</p>
    <ol class="bcls-tasklist">
      <li>Ouvrez le <strong>Joueurs</strong> module et soit créer un nouveau lecteur, soit localiser le lecteur sur lequel vous souhaitez modifier la configuration.</li>
      <li>Cliquez sur le lien correspondant au lecteur pour ouvrir ses propriétés.</li>
      <li>Cliquez sur <strong>JSON Editor</strong> dans le menu de navigation de gauche.</li>
      <li>Localisez le <strong>video_cloud</strong> section dans le JSON, qui ressemblera à ce qui suit (il peut y avoir plus ou moins de paires nom / valeur):
        <pre class="line-numbers">
<code class="language-json" translate="No">"video_cloud": {
    "policy_key": "BCpkADaw...ndVx5X"
  },</code></pre>
      </li>
      <li>Après la dernière entrée, ajoutez une virgule, puis la paire nom / valeur suivante:
        <pre class="line-numbers">
<code class="language-json" translate="No">"base_url": "https://edge-elb.api.brightcove.com/playback/v1/"</code></pre>
      </li>
      <li>L'éditeur JSON doit ressembler à ce qui suit:
        <figure class="bcls-figure"><img class="bcls-image" alt="json editor" src="/assets/images/general/json-editor-restrict.png" /></figure>
      </li>
      <li>Enregistrez et publiez le lecteur mis à jour.</li>
    </ol>
    <aside class="bcls-aside bcls-aside--warning">Les <code translate="No">base_url</code> doit être utilisé UNIQUEMENT avec la configuration de restriction IP.</aside>
  </section>
</article>