---
title: Description «Restrictions de lecture avec Brightcove Player»: "Dans cette rubrique, vous apprendrez à configurer Brightcove Player pour utiliser les restrictions de lecture."
parent: Playback
---


<article class="bcls-article">
  <h1>{{ page.title }}</h1>
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Introduction">Introduction</h2>
    <p>
      Par défaut, Brightcove Player communique avec l'API de lecture Brightcove. Un nouveau système de gestion des droits et restrictions de lecture se trouve devant l'API de lecture et fournit une autorisation de lecture à l'aide de licences DRM.
    </p>
    <p>Vous pouvez utiliser les droits de lecture avec ou sans DRM, mais si vous choisissez d'utiliser des restrictions d'exécution, vous devrez utiliser un jeton Web JSON (JWT).</p>
    <p>License Keys Protection offre un niveau de sécurité supplémentaire lors de l'utilisation de Dynamic Delivery avec un contenu protégé par DRM ou HTTP Live Streaming Encryption (HLSe). Les demandes de licence peuvent être authentifiées à l'aide d'un <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Jeton Web JSON (JWT)</a>. Le jeton est utilisé lors de la demande de licence vidéo, une fois que la vidéo a été chargée sur le lecteur et que la source a été sélectionnée.</p>
    <p>Pour configurer Brightcove Player pour la protection des clés de licence, vous passerez un paramètre de jeton lors de la demande de catalogue pour la vidéo. </p>
    <p>Si vous n'êtes pas familier avec cette fonctionnalité, reportez-vous à la section <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">Présentation : Restrictions de lecture Brightcove</a> document.</p>

    <p>Pour vous aider à comprendre le code dans la section suivante, passez en revue les concepts contenus dans les documents suivants :</p>
    <ul>
      <li><a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Création d'un <span translate="No">jeton Web JSON</span> (JWT)</a></li>
      <li><a href="https://support.brightcove.com/concepts-using-javascript-promises">Concepts : Utilisation de JavaScript Promises</a></li>
      <li><a href="https://support.brightcove.com/player-catalog#Catalog_parameters_object">Paramètres du catalogue</a></li>
      <li><a href="https://support.brightcove.com/configuring-brightcove-player-drm">Configuration du lecteur Brightcove pour DRM</a></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Requirements">Exigences</h2>
    <p>Voici les conditions requises pour utiliser les restrictions de lecture.</p>
    <h3>Droits de lecture</h3>
    <p>Pour utiliser les droits de lecture, vous avez besoin des éléments suivants:</p>
    <ul>
      <li>Version du joueur <strong>6,39,0</strong> ou plus grand</li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">Lors de l'utilisation des droits de lecture, toute restriction de contenu configurée avec des clés de stratégie sera ignorée.</aside>

    <h3>Protection des clés de licence</h3>
    <p>Pour utiliser la protection des clés de licence, vous avez besoin des éléments suivants:</p>
    <ul>
      <li>Version du joueur <strong>6.33.0</strong> ou plus tard</li>
      <li>Si vous utilisez DRM, vous aurez besoin du <a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">Plug-in DRM</a> version <strong>5.5.0</strong> ou plus tard</li>
    </ul>

  </section>

  <section class="bcls-section">
    <h2 id="Using_Playback_Rights">Utilisation des droits de lecture</h2>
    <p>
      Pour utiliser les droits de lecture, procédez comme suit :
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
           Supprimez la clé de stratégie du lecteur Brightcove. Pour plus de détails, consultez le <a href="#Making_requests_with_Playback_Rights">Faire des demandes avec des droits de lecture</a> section.
        </p>
      </li>
      <li>
        <p>
          Si tu as <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">restrictions d'exécution</a> , vous avez besoin d'un jeton d'autorisation. Lorsqu'il est spécifié, ce jeton est ajouté en tant qu'en-tête d'autorisation pour toutes les demandes ultérieures.
        </p>
        <p>
          Vous pouvez en ajouter un au lecteur comme suit :
        </p>
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken('<span class="bcls-input">your jwt token</span>');</code></pre>
      </li>
      <li>Après avoir modifié la clé de stratégie et/ou le jeton d'autorisation, vous êtes prêt à demander des données à l'API de lecture Brightcove et à les charger dans le lecteur. Ce processus est identique au cas par défaut.
        <p>
          Voici un exemple de récupération d'une seule vidéo avec des restrictions de lecture et un jeton d'autorisation :
        </p>
        <aside class="bcls-aside bcls-aside--tip">Notez que le <a href="https://player.support.brightcove.com/coding-topics/using-bc-and-getplayer-methods.html#bc_method_details">méthode bc()</a> est utilisé pour vous permettre de définir la clé de stratégie avant d'appeler le catalogue.</aside>

    <h3>HTML</h3>
  <pre class="line-numbers">
<code class="language-html" translate="No">&lt;div style=&quot;max-width: 960px;&quot;&gt;
  &lt;video-js id=&quot;myPlayerID&quot;
    data-embed=&quot;default&quot;
    controls=&quot;&quot;
    data-application-id=&quot;&quot;
    class=&quot;vjs-fluid&quot;&gt;&lt;/video-js&gt;
&lt;/div&gt;
&lt;script src=&quot;https://players.brightcove.net/<span class="bcls-input">your account id</span>/<span class="bcls-input">your player id</span>_default/index.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
    <h3>JavaScript</h3>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script&gt;
    // +++ Add the player attributes +++
    var myPlayer,
    	myPlayerEl = document.getElementById(&quot;myPlayerID&quot;);
    myPlayerEl.setAttribute('data-account', <span class="bcls-input">your account id</span>);
    myPlayerEl.setAttribute('data-player', '<span class="bcls-input">your player id</span>');

    // +++ Create the player +++
    myPlayer = bc(myPlayerEl);

    // Unset the player policy key
    myPlayer.catalog.setPolicyKey(null);

    // Set the authorization token
    myPlayer.catalog.setBcovAuthToken('<span class="bcls-input">your jwt token</span>');
    // This should trigger a request to:
    //
    //   https://edge-auth.api.brightcove.com/playback/v1/videos/1
    //
    // With header:
    //
    //   Authorization: Bearer &lt;span class=&quot;bcls-input&quot;&gt;your jwt token&lt;/span&gt;
    //

    myPlayer.catalog.get({id: '<span class="bcls-input">your video id</span>', type: 'video'}).
    then(function(data) {
      myPlayer.catalog.load(data);
      myPlayer.muted(true);
      myPlayer.play();
    }).
    catch(function(error) {
      throw new Error(error);
    });
&lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_with_Playback_Rights">Faire des demandes avec des droits de lecture</h2>
    <P>Par défaut, tous les lecteurs Brightcove font une demande à l'API Playback si elle dispose d'une clé de stratégie. Pour effectuer des demandes qui vérifient d'abord les droits de lecture, vous devez supprimer la clé de stratégie. Voici deux façons de procéder:</P>
    <h3>Supprimer la clé de stratégie de tous les joueurs</h3>
    <p>Pour éviter l'ingestion d'une clé de stratégie pour les nouveaux lecteurs créés dans Video Cloud Studio, procédez comme suit:</p>

    <ol class="bcls-tasklist-restart">
      <li>Contactez votre responsable de compte.</li>
      <li>Fournissez votre identifiant de compte et demandez d'activer le <code translate="No">remove policy key</code> drapeau.
      </li>
    </ol>

    <h3>Supprimer la clé de stratégie des joueurs individuels</h3>
    <p>Par défaut, le <code translate="No">remove policy key</code> l'indicateur est désactivé pour votre compte. Pour supprimer la clé de stratégie de joueurs individuels, procédez comme suit:</p>
    <ol class="bcls-tasklist-restart">
      <li>Dans Video Cloud Studio, accédez au module <strong>Lecteurs</strong> .</li>
      <li>Sélectionnez le lecteur dont vous souhaitez supprimer la clé de stratégie.</li>
      <li>Dans la navigation de gauche, sélectionnez <strong>Éditeur JSON</strong>.</li>
      <li>Met le <code translate="No">policy_key</code> champ comme <code translate="No">null</code>.
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/playback/policy-key-editor.png"
          />
          <figcaption class="bcls-caption--image">Editeur JSON</figcaption>
        </figure>
      </li>
      <li>Enregistrez vos modifications et publiez votre lecteur.</li>
    </ol>
      <!-- <pre>
        <code class="language-javascript" translate="No">player.catalog.setPolicyKey(null);</code></pre> -->
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_without_Playback_Rights">Faire des demandes sans droits de lecture</h2>
    <p>Le processus peut être inversé pour renvoyer les requêtes vers l'API Playback sans droits ni restrictions.</p>
    <p>
      Définissez la clé de stratégie et le jeton d'autorisation comme suit :
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>Si vous aviez le <code translate="No">remove policy key</code> drapeau activé, puis contactez votre responsable de compte pour le désactiver.</p>
        <aside class="bcls-aside bcls-aside--information"> Si vous avez le <code translate="No">remove policy key</code> flag activé et que vous le désactivez, les clés de politique seront régénérées pour tous vos joueurs, à l'exception de ceux pour lesquels vous avez défini le <code translate="No">policy_key</code> champ à <code translate="No">null</code>.</aside>
      </li>
      <li>Si vous avez mis à jour des lecteurs individuels dans Studio, mettez à jour le JSON avec votre clé de stratégie.
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/playback/policy-key-defined.png"
          />
          <figcaption class="bcls-caption--image">Editeur JSON</figcaption>
        </figure>
      </li>
      <li>Définissez le jeton d'autorisation sur <code translate="No">null</code>.
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken(null);</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_License_Keys_Protection">Utilisation de la protection des clés de licence</h2>
    <p>Pour utiliser License Keys Protection, vous passerez une chaîne de jeton d'authentification dans le cadre de la <a href="https://player.support.brightcove.com/references/player-catalog.html">catalogue de joueurs</a> objet, en utilisant le nom de la propriété <code translate="No">bcovAuthToken</code>.</p>
    <p>Cette approche fonctionne à la fois pour le contenu DRM et HLSE. Le lecteur détectera le type de source en cours de chargement à partir de l'API Playback et fournira l'implémentation correcte pour cette source.</p>

    <p>Pour utiliser la protection des clés de licence, procédez comme suit:</p>
    <ol class="bcls-tasklist">
      <li>Créer un signé <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Jeton Web JSON (JWT)</a>.</li>
      <li>Incluez ce jeton avec la demande vidéo.
        <p>Cet exemple de code d'implémentation utilise le <a href="https://player.support.brightcove.com/references/player-catalog.html#get_method">catalogue.get()</a> méthode pour demander la vidéo tout en fournissant le jeton.</p>
    <aside class="bcls-aside bcls-aside--information">Veillez à NE PAS inclure le <code translate="No">data-video-id</code> paramètre dans la <code translate="No">&lt;video-js&gt;</code> balise.</aside>
<pre class="line-numbers">
  <code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
    data-account=&quot;1507807800001&quot;
    data-player=&quot;default&quot;
    data-embed=&quot;default&quot;
    controls
    data-application-id&gt;&lt;/video-js&gt;
  &lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;
  
  &lt;script&gt;
    (function() {
      var myPlayer = videojs.getPlayer('myPlayerID');
  
      myPlayer.catalog.get({
        type: 'video',
        id: '6015247091001',
        <span class="bcls-highlight">bcovAuthToken:</span> '<span class="bcls-input">your jwt token</span>'
      })
        .then(function(videoReturned){
          myPlayer.catalog.load(videoReturned);
        })
        .catch(function(err){
          console.log('err:', err);
        });
    })();
  &lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_Concurrency_and_Registration">Utilisation de la simultanéité et de l'enregistrement</h2>
    <p>Si vous utilisez <a href="https://apis.support.brightcove.com/playback-restrictions/guides/stream-concurrency.html">Concurrence de flux</a> ou <a href="https://apis.support.brightcove.com/playback-restrictions/guides/device-limits.html">Enregistrement de l'appareil</a> , votre lecteur Brightcove devra utiliser le <strong>GEM</strong> plug-in AU LIEU de la norme <strong>GDN</strong> brancher.</p>
    <aside class="bcls-aside bcls-aside--information">Le plugin DRM est un wrapper pour le plugin EME. Pour plus de détails, consultez le <a href="https://player.support.brightcove.com/plugins/configuring-brightcove-player-drm.html#DRM_plugin_architecture">Configuration de Brightcove Player pour DRM</a> document.</aside> 
    

    <p>Suivez ces étapes :</p>
    <ol class="bcls-tasklist-restart">
      <li>Ajouter le <strong>GEM</strong> plug-in à votre Brightcove Player. Le plugin a été mis à jour pour inclure <code translate="No">persistentState</code>.</li>
      <li>Dans Video Cloud Studio, accédez au <strong>Joueurs</strong> module. Sélectionnez un lien de joueur pour voir ses informations.</li>
      <li>Dans la navigation de gauche, sélectionnez <strong>Relecture</strong>.</li>
      <li>
        <p>Sois sûr que <strong>Activer DRM</strong> n'est PAS sélectionné.</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Enable DRM option"
            src="/assets/images/playback/playback-restrictions/enable-drm-option.png"
          />
          <figcaption class="bcls-caption--image">Activer l'option DRM</figcaption>
        </figure>
      </li>
      <li>Dans la navigation de gauche, sélectionnez <strong>JSON Editor</strong>.</li>
      <li>
        <p>Dans le code JSON, recherchez le <code translate="No">plugins</code> array, et ajoutez le plugin EME comme suit :</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">&quot;plugins&quot;: [
  {
  &quot;name&quot;: &quot;eme&quot;,
  &quot;scripts&quot;: [
    &quot;//players.brightcove.net/videojs-drm/5.9.1/videojs-drm.min.js&quot;
  ],
  &quot;stylesheets&quot;: [
    &quot;//players.brightcove.net/videojs-drm/5.9.1/videojs-drm.css&quot;
  ],
  &quot;options&quot;: {
    &quot;keySystems&quot;: {
      &quot;com.widevine.alpha&quot;: {
        &quot;persistentState&quot;: &quot;required&quot;
      }
    }
  }
},</code></pre>
<aside class="bcls-aside bcls-aside--warning">Le plug-in EME doit être configuré dans l'ordre indiqué ci-dessus (scripts &amp; feuille de style d'abord puis l'option) sinon, cela ne fonctionnera pas.</aside> <aside class="bcls-aside bcls-aside--information">Cette fonctionnalité est prise en charge dans le plug-in DRM v5.9.1 +.</aside>
      </li>
      <li>Incluez un jeton d'authentification JWT, tel que défini dans le <a href="#Using_License_Keys_Protection">Utilisation de la protection des clés de licence</a> section.</li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="configuring_server_side_ads_SSAI">Configuration des annonces côté serveur (SSAI)</h2>
    <p>Si vous utilisez la protection des clés de licence avec SSAI, vous devez inclure un paramètre supplémentaire à l'objet de paramètres de catalogue, nommé <code translate="No">adConfigId</code>. </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001',
      bcovAuthToken: '<span class="bcls-input">your jwt token</span>',
      <span class="bcls-highlight">adConfigId:</span> '<span class="bcls-input">your ad configuration id</span>'
    })
      .then(function(videoReturned){
        myPlayer.catalog.load(videoReturned);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_custom_implementation">Utilisation d'une implémentation personnalisée</h2>
    <p>Vous utilisez peut-être une implémentation personnalisée où vous n'avez pas le <code translate="No">bcovAuthToken</code> pour régler la valeur avec le <a href="https://support.brightcove.com/player-catalog#get_method">catalogue.get()</a> demande de méthode. Si vous utilisez votre propre lecteur ou un joueur tiers, vous pouvez utiliser l'une des approches suivantes pour transmettre votre jeton à la demande de licence :</p>
    <ul>
      <li>
        En-tête HTTP : <code translate="No">BCOV-Auth</code>(Non pris en charge pour HLSE)
      </li>
      <li>
        Cookie : <code translate="No">bcov-auth</code>(Non pris en charge pour HLSE)
      </li>
      <li>
        Paramètre de requête : <code translate="No">bcov-auth</code>(Prise en charge uniquement pour HLSE) Doit être ajouté à l'URL du manifeste principal, au lieu de l'URL de la licence
      </li>
    </ul>
    <p>
      Voici un exemple montrant comment définir l' <code translate="No">source.emeHeaders['BCOV-Auth']</code> attribut de l'objet vidéo sur le jeton. Cette opération insère le <code translate="No">emeHeader</code> sur chaque source APRÈS la demande de catalogue.
    </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001'
    })
    .then(function(video){
      sources=video.sources;

      for (let i = 0; i &lt; sources.length; i++) {
        const source = sources[i];

        // Only add the auth token as an eme header for DRM content
        if (<span class="bcls-input">your jwt token</span> &amp;&amp; source.key_systems) {
          source.emeHeaders = {
              'BCOV-Auth': <span class="bcls-input">your jwt token</span>
            };
        }
      }
        myPlayer.catalog.load(video);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
    <!-- <p>
      For more details about working with MPEG-DASH, see the <a href="https://support.brightcove.com/creating-dash-drm-manifest-brightcove-player">Creating a DASH DRM Manifest for the Brightcove Player</a> document.
    </p> -->

  </section>
</article>