---
title: Utilisation du Brightcove Player pour TVE
parent: Playback
description: 'This topic provides information on Video Cloud’s <a href="https://www.adobe.com/marketing-cloud/primetime.html">Adobe Primetime</a> intégration pour les solutions TV Everywhere (TVE). Les instructions ci-dessous simplifient la saisie des données et la gestion des métadonnées vidéo en supprimant la duplication inutile des valeurs et en générant automatiquement les valeurs de requête XML requises par le client Adobe Pass en fonction de champs personnalisés individuels.'
---

<article class="bcls-article">
  <h1>Utilisation du lecteur Brightcove pour TVE</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="account_configuration">Configuration du compte</h2>
    <p>L'utilisation de Video Cloud avec TVE nécessite une configuration de compte par le support Brightcove. Si vous souhaitez utiliser TVE, <a href="https://supportportal.brightcove.com/s/login/?language=en_US">Contacter l'assistance Brightcove</a> pour plus de détails.</p>
  </section>
  <section class="bcls-section">
    <h2 id="customFields">Champs obligatoires</h2>
    <p>Pour cette intégration, vous souhaiterez peut-être créer un ou plusieurs des champs personnalisés suivants dans votre compte. Les noms ci-dessous sont les <em>interne</em> noms pour les champs - vous pouvez utiliser ce que vous voulez pour les noms d'affichage.</p>
    <ul>
      <li><code translate="No">bcadobepassrequestorid</code></li>
      <li><code translate="No">bcadobepasstitle</code></li>
      <li><code translate="No">bcadobepassreferenceid</code></li>
      <li><code translate="No">bcadobepassrating</code></li>
      <li><code translate="No">bcadobepassratingscheme</code></li>
    </ul>
    <p>Dans la section suivante, vous verrez comment ces champs sont utilisés, s'ils sont présents, et quelles valeurs sont utilisées à la place si elles ne le sont pas.</p>
  </section>
  <section class="bcls-articlesection">
    <h2 id="autoGeneratation">Génération automatique de <code translate="No">resourceID</code> et <code translate="No">requestorID</code> des champs</h2>
    <p>Lorsqu'un utilisateur récupère une vidéo via l'API de lecture d'un compte compatible TVE, l'API renvoie une valeur pour <code translate="No">bcadobepassrequestorid</code> selon les règles suivantes:</p>
    <ul>
      <li>Si une valeur de champ personnalisé pour <code translate="No">bcadobepassrequestorid</code> existe sur la vidéo, l'API renverra la valeur au niveau de la vidéo.</li>
      <li>Si aucune valeur n'est définie pour le <code translate="No">bcadobepassrequestorid</code> champ, l'API renverra la valeur de l'ID du demandeur stockée dans les paramètres du compte.</li>
    </ul>
    <p>&nbsp;</p>
    <p>Lorsqu'un utilisateur récupère une vidéo via l'API de lecture d'un compte compatible TVE, l'API renvoie une valeur pour <code translate="No">bcadobepassresourceid</code> selon les règles suivantes:</p>
    <ul>
      <li>Si une valeur de champ personnalisé pour <code translate="No">bcadobepassresourceid</code> existe sur la vidéo, l'API renverra la valeur au niveau du champ</li>
      <li>Si aucune valeur n'est définie pour le <code translate="No">bcadobepassresourceid</code> , l'API renverra une valeur calculée basée sur les champs et le format XML indiqués ci-dessous.</li>
    </ul>
    <p>Le généré <code translate="No">bcadobepassresourceid</code> doit suivre le format MRSS spécifié par Adobe et utilisé dans presque toutes les intégrations avec Comcast.</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;rss version='2.0' xmlns:media='http://search.yahoo.com/mrss/'&gt;
&lt;channel&gt;
&lt;title&gt;<span class="bcls-input">channel</span>&lt;/title&gt;
&lt;item&gt;&lt;title&gt;<span class="bcls-input">item-title</span>&lt;/title&gt;
&lt;guid&gt;<span class="bcls-input">guid</span>&lt;/guid&gt;
&lt;media:rating scheme='urn:<span class="bcls-input">rating-scheme</span>'&gt;<span class="bcls-input">rating</span>&lt;/media:rating&gt;&lt;/item&gt;
&lt;/channel&gt;
&lt;/rss&gt;
</code></pre>
    <p>Les valeurs incluses dans le MRSS doivent être basées sur les règles suivantes.</p>
    <table class="bcls-table">
      <caption class="bcls-caption--table">
      Champs RSS TVE
      </caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Champ XML RSS</th>
          <th>Champ Video Cloud</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">channel</code></td>
          <td><ul>
              <li>S'il est présent, utilisez <code translate="No">bcadobepassrequestorid</code></li>
              <li>S'il n'est pas présent, utilisez la valeur définie dans les paramètres du compte</li>
            </ul></td>
        </tr>
        <tr>
          <td><code translate="No">item-title</code></td>
          <td><ul>
              <li>Si présent, utilisez <code translate="No">bcadobepasstitle</code></li>
              <li>S'il n'est pas présent, utilisez <code translate="No">name</code></li>
            </ul></td>
        </tr>
        <tr>
          <td><code translate="No">guid</code></td>
          <td><ul>
              <li>Si présent, utilisez <code translate="No">bcadobepassreferenceid</code></li>
              <li>S'il n'est pas présent, utilisez <code translate="No">reference_id</code></li>
            </ul></td>
        </tr>
        <tr>
          <td><code translate="No">rating</code></td>
          <td><ul>
              <li>S'il est présent, utilisez <code translate="No">bcadobepassrequestorid</code></li>
              <li>Envoi uniquement si <code translate="No">bcadobepassrating</code> les deux <code translate="No">bcadobepassratingscheme</code> sont présents</li>
            </ul></td>
        </tr>
        <tr>
          <td><code translate="No">rating-scheme</code></td>
          <td><ul>
              <li>Si présent, utilisez <code translate="No">bcadobepassrating</code></li>
              <li>Envoi uniquement si <code translate="No">bcadobepassrating</code> les deux <code translate="No">bcadobepassratingscheme</code> sont présents</li>
            </ul>
            <aside class="bcls-aside bcls-aside--information">Remarque : Actuellement, les seules valeurs utilisées sont <code translate="No">v-chip</code> ou <code translate="No">mpaa</code> mais d'autres peuvent être utilisés à l'avenir.</aside></td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="bcls-section">
    <h2 id="configuring_the_player">Configurer le lecteur</h2>
    <p>Le code suivant fournit un modèle de configuration du lecteur Brightcove pour TVE.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;TVE Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Make sure your player doesn't have a video associated with it
  and don't use data-video-id to assign one. We'll request a video
  from the catalog by hand, detect that it's TVE content, trigger TVE
  authentication and then load the video into the player. --&gt;
  &lt;video-js id="<span class="bcls-highlight">tve-player</span>"
    data-account="account1234"
    data-player="player-id"
    class="video-js"
    controls&gt;
  &lt;/video-js&gt;
  &lt;script src="//players.brightcove.net/account1234/player-id_default/index.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;
  var player = videojs.getPlayer('<span class="bcls-highlight">tve-player</span>');
  player.ready(function() {
    player.catalog.getVideo('ref:tve-video', function(error, video) {
      if (error) {
        // showErrorMessage() would be defined by you somewhere else
        // in the page
        return showErrorMessage(error);
      }
      // You can tell whether a video is TVE protected by checking to
      // see if the video sources contain URLs. If they don't, you need
      // to authenticate your viewer and re-request the video with their
      // TVE credentials.
      if (video.sources &amp;&amp; video.sources[0].src) {
        // This is not a TVE video so it can be played back immediately
        return player.catalog.load(video);
      }
      // From here on, we're definitely dealing with a TVE video.
      // You need to provide an implementation for authenticateWithTVE()
      // to get a TVE token. See the documentation from your TVE provider
      // for details on how to do that.
      autenticateWithTVE(function(error, tveToken) {
        if (error) {
          return showErorMessage(error);
        }
        // Now that we have the token, we can re-request the video and get playable URLs.
        player.catalog.tveToken = tveToken;
        player.catalog.getVideo('ref:tve-video', function(error, video) {
          if (error) {
            return showErrorMessage(error);
          }
          player.catalog.load(video);
        });
      });
    });
  });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="playback_api_response">Réponse à la demande sans authentification</h2>
    <p>Vous trouverez ci-dessous un exemple de réponse de l'API de lecture lorsque l'authentification TVE n'a pas été fournie. Comme vous le verrez, les sources vidéo ne sont pas disponibles, mais d'autres métadonnées vidéo sont présentes pour permettre au lecteur d'afficher un aperçu du contenu.</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
  <span class="bcls-highlight">"sources": [

    ],</span>
  "description": "The short description can be used to give more information about your video and will appear in many standard Brightcove Player templates.",
  "poster_sources": [
    {
      "src": "http://f1.media.brightcove.com/8/96980657001/96980657001_207574837001_commonRedpoll-still.jpg?pubId=3840518800001&amp;videoId=3843070012001"
    },
    {
      "src": "https://f1.media.brightcove.com/8/96980657001/96980657001_207574837001_commonRedpoll-still.jpg?pubId=3840518800001&amp;videoId=3843070012001"
    }
  ],
  "tags": [
    "sample"
  ],
  "cue_points": [

  ],
<span class="bcls-highlight">"errors": [
      {
        "error_subcode": "TVE_AUTH",
        "error_code": "SOURCES_RESTRICTED",
        "message": "Video sources are restricted by access policy.",
        "restricted_fields": [
          "sources"
        ]
      }
    ],</span>
    "custom_fields": {
    "bcadobepassresourceid": "<rss version="\&quot;2.0\&quot;" xmlns:media="\&quot;http://search.yahoo.com/mrss/\&quot;"><channel>
    <title></title>
    <item>
        <title></title>
        <guid>anotherRefId</guid>
        <media:rating scheme="\&quot;urn:TV-14\&quot;">XXX</media:rating>
        </item></channel></rss>",
    "bcadobepassrequestorid": "asdfasf",
    "bcadobepassrating": "XXX",
    "bcadobepassreferenceid": "anotherRefId",
    "bcadobepasstitle": "PassTitle",
    "bcadobepassratingscheme": "TV-14"
  },
  "account_id": "3840518800001",
  "name": "Sample Video 2",
  "reference_id": null,
  "long_description": null,
  "duration": 29960,
  "economics": "AD_SUPPORTED",
  "published_at": "2014-10-16T16:35:24.520Z",
  "text_tracks": [

  ],
  "updated_at": "2017-05-26T01:48:41.396Z",
  "thumbnail": "http://f1.media.brightcove.com/8/96980657001/96980657001_180424037001_commonRedpoll-thumbnail.jpg?pubId=3840518800001&amp;videoId=3843070012001",
  "poster": "http://f1.media.brightcove.com/8/96980657001/96980657001_207574837001_commonRedpoll-still.jpg?pubId=3840518800001&amp;videoId=3843070012001",
  "offline_enabled": false,
  "link": null,
  "id": "3843070012001",
  "ad_keys": null,
  "thumbnail_sources": [
    {
      "src": "http://f1.media.brightcove.com/8/96980657001/96980657001_180424037001_commonRedpoll-thumbnail.jpg?pubId=3840518800001&amp;videoId=3843070012001"
    },
    {
      "src": "https://f1.media.brightcove.com/8/96980657001/96980657001_180424037001_commonRedpoll-thumbnail.jpg?pubId=3840518800001&amp;videoId=3843070012001"
    }
  ],
  "created_at": "2014-10-16T16:35:24.520Z"
}</code></pre>
  </section>
</article>