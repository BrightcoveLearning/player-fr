---
title: Mise à niveau vers la version 3 du plug-in IMA3
description: 'Dans cette rubrique, vous découvrirez la mise à niveau vers la version 3 du plug-in publicitaire IMA3.'
parent: Plugins
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
    <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">Présentation</h2>
    <p>En mai 2018, Brightcove a publié la version 3 du plugin IMA Advertising. La mise à jour comprend de nombreuses améliorations majeures en termes de fiabilité et d'autres domaines, qui sont détaillés dans la section suivante de ce document. La mise à jour concerne uniquement Brightcove Player version 6 et supérieure. Les lecteurs de la version 6 existants ne seront pas migrés automatiquement vers la version 3 car certaines intégrations devront peut-être être mises à jour pour prendre en charge la nouvelle version. Brightcove vous encourage à lire entièrement ce document, puis à tester les modifications avant la mise à niveau.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Improvements">Améliorations</h2>
    <p>Voici une liste des améliorations apportées à la version 3 du plugin:</p>
    <ul>
      <li>La gestion par le plugin des modifications de la source vidéo a été fondamentalement remaniée, ce qui se traduit par une bien plus grande fiabilité lorsqu'il est utilisé avec des listes de lecture.</li>
      <li>La définition de l'URL du serveur peut désormais être retardée, ce qui permet une intégration facile des flux de travail asynchrones tels que les enchères d'en-tête ou les macros basées sur les informations multimédias. Voici deux exemples:
        <ul>
          <li>le <a href="/advertising/jump-start-header-bidding-ad.html">Début de saut: Annonce d'enchères d'en-tête</a> document.</li>
          <li>le <a href="/plugins/advertising-ima3-plugin.html#Implement_using_code">Implémenter en utilisant du code</a> section du document du plugin IMA3.</li>
        </ul>
      </li>
      <li>Un bug a été corrigé qui aurait pu entraîner un délai d'attente plus long que prévu.</li>
      <li>La prise en charge de Flash a été supprimée pour améliorer les performances.</li>
      <li>Diverses corrections de bogues supplémentaires et améliorations de la fiabilité sont intégrées à la nouvelle version.</li>
      <li>
        <p>Vous pouvez donner des valeurs par défaut aux macros d'annonces. Une valeur par défaut peut être fournie dans une macro, auquel cas cette valeur sera utilisée lorsqu'une variable n'est pas définie. La syntaxe est la suivante :</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">{macro=default}</code></pre>
        <p>Par exemple,</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">http://example.com/ad/{pageVariable.adConf=1234}</code></pre>
        <p>se résoudrait à ce qui suit si n' <code translate="No">window.adConf</code> est pas défini :</p>
        <pre class="line-numbers">
http://example.com/ad/1234</pre>
      </li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Technical_details">Détails techniques</h2>
    <p>Pour améliorer la fiabilité, le plugin Brightcove IMA a mis à jour sa dépendance sur <strong>videojs-contrib-ads</strong> , le framework publicitaire open source Video.js, vers la version 6. Il s'agit d'une mise à jour de maintenance majeure. Vous pouvez en savoir plus sur <strong>videojs-contrib-ads</strong> version 6 sur le <a href="http://blog.videojs.com/videojs-contrib-ads-6/">Blog Video.js</a>.</p>
    <p>Cette mise à jour supprime la cause première de certains flashs de contenu apparus avant les prélèvements. La solution utilise <a href="https://blog.videojs.com/feature-spotlight-middleware/">Intergiciel Video.js</a> pour supprimer la nécessité de faire une lecture rapide et de faire une pause au début de la lecture.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Migrating_to_version_3">Migrer vers la version 3</h2>
    <p>Les joueurs existants ne seront PAS automatiquement mis à niveau vers la version 3 du plugin Brightcove IMA. Dans l'interface Studio par défaut (héritée), la version 2 du plugin IMA sera toujours utilisée, comme par le passé. Dans la (nouvelle) interface bêta de Studio, le <strong>La publicité</strong> a une liste déroulante pour vous permettre de choisir la version du plugin IMA à utiliser. Cette nouvelle interface peut être utilisée pour migrer les joueurs. Brightcove vous recommande vivement de revoir votre intégration et de tester soigneusement votre lecteur lors de la mise à niveau.</p>
    <p>Les joueurs nouvellement créés utiliseront la version 3 par défaut lorsque la publicité est activée. Ils peuvent être définis manuellement sur la version 2 si nécessaire.</p>
    <p>Voici une liste des changements qui peuvent nécessiter la mise à jour des intégrations:</p>
    <ul>
      <li>Vous souhaiterez peut-être effectuer un test pour vous assurer que vous ne dépendiez pas d'un délai d'attente plus long que celui spécifié dans votre configuration.</li>
      <li>le <code translate="No">ended</code> les événements ne sont plus retardés d'une seconde. Si votre intégration répond à <code translate="No">ended</code> événements, vous devez tester que l'intégration continue de fonctionner comme prévu. En général, cela signifie que de telles intégrations seront plus performantes.</li>
      <li>le <code translate="No">player.ads.state</code> La propriété est désormais obsolète. Brightcove l'a vu utilisé dans certaines intégrations pour vérifier si le lecteur est en mode publicité, mais cela n'est généralement pas fait correctement. Une meilleure alternative est d'utiliser le <code translate="No">player.ads.isInAdMode()</code> méthode.</li>
      <li>le <code translate="No">contentplayback</code> l'événement a été supprimé. C'est un détail d'implémentation qui n'est plus nécessaire, mais nous avons constaté que certaines intégrations l'utilisent. Utilisez le <code translate="No">playing</code> événement à la place.</li>
      <li>Le début de la lecture de l'annonce est indiqué par <code translate="No">ads-ad-started</code> événement, qui se déclenche exactement une fois lorsque chaque annonce commence. Tandis que le <code translate="No">adplaying</code> l’événement continuera à être émis, il peut désormais l’être plusieurs fois par lecture publicitaire. Brightcove recommande donc d’utiliser le <code translate="No">ads-ad-started</code> événement à la place.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Why_a_major_version_update?">Pourquoi une mise à jour majeure de la version?</h2>
    <p>Bien que les changements puissent sembler modestes, plusieurs aspects clés de l'interface ont changé, ce qui a entraîné une mise à jour majeure de la version. Plus précisément, l'élimination du <code translate="No">contentplayback</code> événement, ainsi que le comportement spécifique du <code translate="No">timeout</code> paramètre. Bien que celles-ci puissent sembler mineures, certaines intégrations peuvent dépendre de leur comportement particulier. Étant donné que même de petits changements peuvent faire une grande différence dans certaines implémentations client, Brightcove estime qu'une augmentation de version majeure était appropriée pour indiquer que les intégrations doivent être testées de manière approfondie avant d'être utilisées en production.</p>
  </section>
</article>