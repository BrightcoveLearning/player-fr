---
title: Attribution d'une vidéo au lecteur par programmation

parent: 'Publishing Videos &amp; Players'
description: In this topic, you will learn how to dynamically change the video in the player. To do this you will programmatically change the player instances. This document shows various approaches to changing the video in the player.
---
 <h1>Attribution d'une vidéo au lecteur par programmation</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <aside class="bcls-aside bcls-aside--information">Le contenu de ce document s'applique uniquement à Video Cloud.</aside>
  <section class="bcls-section">
    <h2 id="urldynamicvideo">Définir l'ID vidéo via l'URL</h2>
    <p>Il est possible d'utiliser l'implémentation d'URL et de modifier dynamiquement la vidéo qui est lue. Pour ce faire, vous utilisez une chaîne de requête à la fin de l'URL sous la forme <code translate="No">?videoId=<em>YOUR_VIDEO_ID</em></code> comme le montre l'exemple suivant.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://players.brightcove.net/..._default/index.html?videoId=2114345471001</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="refids">Utilisation des ID de référence</h2>
    <p>Dans tous les exemples de ce document où un ID vidéo est utilisé, un <strong>Pièce d'identité</strong> peut être remplacé. Si vous utilisez l'ID de référence, vous devez ajouter cet identifiant <strong>réf:</strong>. Par exemple, la première URL utilise l'ID vidéo, tandis que la seconde utilise l'ID de référence.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://players.brightcove.net/..._default/index.html?videoId=2114345471001
https://players.brightcove.net/..._default/index.html?videoId=ref:1234abcd</code></pre>
  </section>
  <section id="tag" class="bcls-section">
    <h2>Définir l'ID vidéo via l'attribut de balise</h2>
    <p>Le code d'intégration de l'encart contient le <code translate="No">&lt;video&gt;</code> marque. L'ID Video Cloud de la vidéo est associé au <code translate="No">data-video-id</code> HTML 5 <strong>Les données</strong> attribut.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js
  data-account="1507807800001"
  data-player="dadff0fb-5635-4eac-a1b8-ab8c37a72be9"
  data-embed="default"
  <span class="bcls-highlight">data-video-id="2114345471001"</span>
  class="video-js"
  controls&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1507807800001/dadff0fb-5635-4eac-a1b8-ab8c37a72be9_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
    <aside class="bcls-aside bcls-aside--tip">Remarque : Lorsque le lecteur JavaScript s'exécute, il lit l'ID vidéo à partir du <code translate="No">data-video-id</code> attribut. Cependant, il ne le fait qu'au démarrage. Changer la valeur avec, par exemple, JavaScript <code translate="No">setAttribute()</code> , n'entraîne pas le chargement de la vidéo par le lecteur. Pour modifier la vidéo après le chargement du lecteur, vous devez utiliser la méthode JavaScript décrite ci-dessous.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="setvideousingjavascript">Définir la vidéo à l'aide de JavaScript</h2>
    <p>Dans de nombreux cas, vous voulez que les interactions des utilisateurs contrôlent quelle vidéo est lue. Pour ce faire, vous pouvez utiliser JavaScript et le catalogue de lecteurs <code translate="No">getVideo()</code> et <code translate="No">load()</code> méthodes pour récupérer et lire dynamiquement la vidéo souhaitée.</p>
    <ul>
      <li>Lignes 1 à 8: Code avancé (intégré sur la page) sans valeur pour <code translate="No">data-video-id</code> attribut.</li>
      <li>Lignes 11,17: Utilisez le <code translate="No">ready()</code> méthode pour être sûr que le joueur est prêt à agir.</li>
      <li>Ligne 12 : Associez le joueur, appelé <code translate="No">this</code> dans la fonction, avec une variable.</li>
      <li>Ligne 13,16: Utilisez le catalogue <code translate="No">getVideo()</code> méthode utilisant l'ID Video Cloud et une fonction de rappel comme paramètres.</li>
      <li>Ligne 15 : Utilisez le catalogue <code translate="No">load()</code> méthode pour charger la vidéo et la lire.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-html" translate="No">  &lt;video-js id="myPlayerID"
    data-account="1507807800001"
    data-player="3bc25a34-086a-4060-8745-dd87af3d53b4"
    data-embed="default"
    data-video-id=""
    class="video-js"
    controls&gt;&lt;/video-js&gt;
  &lt;script src="https://players.brightcove.net/1507807800001/3bc25a34-086a-4060-8745-dd87af3d53b4_default/index.min.js"&gt;&lt;/script&gt;

  &lt;script type="text/javascript"&gt;
    videojs.getPlayer('myPlayerID').ready(function() {
      var myPlayer = this;
      myPlayer.catalog.getVideo('2114345471001', function(error, video) {
        //deal with error
        myPlayer.catalog.load(video);
      });
    });
  &lt;/script&gt;</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="setvideoiniframe">Définir la vidéo dans iframe</h2>
    <p>Pour spécifier la vidéo à un lecteur hébergé dans une iframe, vous pouvez transmettre l'ID vidéo (ou l'ID de référence comme mentionné précédemment) via la chaîne de requête d'une URL. Par exemple :</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">  &lt;iframe src='https://players.brightcove.net/.../index.html<span class="bcls-highlight">?videoId=2114345471001'</span>
    allowfullscreen
    webkitallowfullscreen
    mozallowfullscreen&gt;&lt;/iframe&gt; </code></pre>
    <p>Vous pouvez également utiliser JavaScript pour modifier la chaîne de requête de l'iframe <code translate="No">src</code> attribut pour indiquer au joueur la nouvelle vidéo à lire.</p>
    <ul>
      <li>Lignes 1-2: Le code d'implémentation iframe. Notez la chaîne de requête (texte après le <strong>?</strong> caractère) fournit l'ID de la vidéo à lire.</li>
      <li>Ligne 5 : Définissez la fonction à appeler lorsque la vidéo doit changer.</li>
      <li>Ligne 6 : Utilisez JavaScript <code translate="No">getElementsByTagName()</code> méthode pour placer le <code translate="No">&lt;iframe&gt;</code> tag dans une variable. Notez que la méthode renvoie un tableau de tous les éléments correspondants sur la page, et puisque vous utilisez la première (et la seule) balise iframe sur la page, vous pouvez utiliser l'élément zéro du tableau.</li>
      <li>Ligne 7 : Crée une chaîne de requête qui remplacera l'ancienne. Ceci définit la nouvelle vidéo à lire.</li>
      <li>Ligne 8 : Affecte à une variable le <code translate="No">src</code> propriété de la <code translate="No">iframe</code> marque.</li>
      <li>Ligne 9 : Extrait la source du lecteur, moins l'ancienne chaîne de requête.</li>
      <li>Ligne 10 : Construit la nouvelle valeur pour le <code translate="No">src</code> propriété en combinant la source du lecteur avec la définition de chaîne de requête de la nouvelle vidéo.</li>
      <li>Ligne 11 : Attribue les nouvelles informations de source / vidéo au <code translate="No">&lt;iframe&gt;</code> Mots clés <code translate="No">src</code> propriété.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;iframe src='https://players.brightcove.net/...c_default/index.html?videoId=4341341161001'
    allowfullscreen webkitallowfullscreen mozallowfullscreen&gt;&lt;/iframe&gt;

&lt;script type="text/JavaScript"&gt;
  function changeVideo() {
    var iframeTag = document.getElementsByTagName("iframe")[0],
      newVideo = "?videoId=3742256815001",
      theSrc = iframeTag.src,
      srcWithoutVideo = theSrc.substring( 0, theSrc.indexOf( "?" ) ),
      newSrc = srcWithoutVideo + newVideo;
    iframeTag.src = newSrc;
  }
&lt;/script&gt;  </code></pre>
  </section>
</article>