---
title: 'Mise à jour en masse du lecteur par défaut Brightcove'
description: 'Dans cette rubrique, vous apprendrez à mettre à jour Brightcove Default Player à partir de plusieurs comptes à l'aide de curl, d'un script shell et de Terminal.'

parent: 'Publishing Videos &amp; Players'
---


<!-- 
  This content appears on:
  
  https://apis.support.brightcove.com/player-management/code-samples/bulk-updating-brightcove-default-player.html

  https://player.support.brightcove.com/publish/bulk-updating-brightcove-default-player.html

  If you update in one place, you MUST update it in all!
 -->

 <h1>{{ page.title }}</h1>
 <article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">introduction</h2>
    <p>L'instruction curl présentée dans ce document bouclera sur un certain nombre de comptes et mettra à jour UNIQUEMENT le <strong>Lecteur par défaut Brightcove</strong> dans ces comptes à une version de Brightcove Player souhaitée. Comme condition préalable à l'instruction curl utilisée pour effectuer la mise à jour et la publication, il est montré comment obtenir un jeton d'accès à utiliser dans l'instruction curl.</p>
  </section>
  <section class="bcls-section">
    <h2 id="section-name">Obtenir un jeton d'accès</h2>
    <p>Vous devez disposer d'un jeton d'accès qui fournit <strong>Lecteur lecture/écriture</strong> accès pour tous les comptes sur lesquels vous allez utiliser l'instruction curl. En Studio, depuis le <strong>Administrateur</strong> sélection déroulante <strong>Authentification API</strong>. Enregistrez une nouvelle application et sélectionnez les comptes souhaités. Pour le <strong>API Brightcove exposées</strong> choisir <strong>Joueurs &gt; Lecture/écriture</strong>.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="API Authentication UI" src="/assets/images/publish/api-authentication-ui.png" /></figure>
    <p>Après avoir enregistré, copiez le <strong>identité du client</strong> et <strong>Secret du client</strong>.</p>
    <p>Pour plus d'informations sur ce processus, consultez le <a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">Génération de jetons d'accès</a> document.</p>
    <p>Maintenant, pour obtenir votre jeton d'accès, utilisez l'ID client et le secret client avec cet exemple : <a href="https://apis.support.brightcove.com/oauth/code-samples/oauth-api-sample-get-access-token.html">Exemple d'API OAuth : Obtenez un jeton d'accès</a>. N'oubliez pas que vous devrez peut-être utiliser cet exemple à plusieurs reprises, car les jetons d'accès ne sont valides que pendant 5 minutes.</p>
  </section>
  <section class="bcls-section">
    <h2 id="curl_statement">déclaration curl</h2>
    <p>Créez un dossier dans lequel vous créerez quelques fichiers et à partir duquel vous exécuterez un script à partir du terminal. Dans ce dossier, créez un fichier nommé <strong>accountList.txt</strong> , et dans le fichier, copiez et collez simplement tous les <strong>identifiants de compte</strong> pour lequel vous souhaitez mettre à jour le <strong>Lecteur par défaut Brightcove</strong>.</p>
    <p>Créez maintenant un autre fichier nommé <strong>mise à jour en masse.sh</strong>. Placez l'instruction curl suivante dans le fichier :</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">#!/bin/bash

#Loop through publisher IDs in accountlist.txt
while read -r ACCOUNTID; do
    echo $ACCOUNTID

    #Update
    curl -X PATCH "https://players.api.brightcove.com/v1/accounts/$ACCOUNTID/players/default/configuration" \
    -H "Authorization: Bearer YOUR_ACCESS_TOKEN_HERE" \
    -H 'Content-Type: application/json' \
    -d '{"player":{"template":{"version":"6.34.3"}}}'

    #Publish
    curl -X POST "https://players.api.brightcove.com/v1/accounts/$ACCOUNTID/players/default/publish" \
    -H "Authorization: Bearer YOUR_ACCESS_TOKEN_HERE" \
    -H 'Content-Type: application/json' \
    -d '{"comment": "Updated to v6"}'

    #Wait 1 second then loop
    sleep 1
done &lt;accountList.txt</code></pre>
    <p>Bien sûr, vous devrez remplacer les deux instances de <strong>YOUR_ACCESS_TOKEN_HERE</strong> par votre jeton d'accès réel. Si plus de 5 minutes se sont écoulées depuis que vous avez généré votre jeton d'accès, réexécutez l'exemple pour obtenir un nouveau jeton. De plus, vous pouvez utiliser n'importe quelle version du lecteur, il suffit de mettre à jour la version utilisée, <strong>6.34.3</strong>.</p>
    <p>Enfin, ouvrez une instance de Terminal dans le dossier contenant les deux fichiers. Pour exécuter le script, saisissez :</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">bash ./bulk-update.sh</code></pre>
    <p>Le script met à jour la version du lecteur et publie le lecteur.</p>
  </section>
</article>