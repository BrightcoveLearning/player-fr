---
title: Retarder l'instanciation du joueur

parent: 'Publishing Videos &amp; Players'
description: In this topic, you will learn how to delay instantiation of Brightcove Player when an HTML page is browsed. Use cases where this technique is helpful are, for example, lightbox styles and single page web apps where the page with the player is not initially instantiated.
---

<article class="bcls-article">
  <h1>Retarder l'instanciation du joueur</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Delay_instantiation">Délai d'instanciation</h2>
    <p>Il existe quelques cas d'utilisation dans lesquels vous souhaiterez utiliser le code d'implémentation du lecteur avancé (intégré dans la page), mais retarder l'instanciation du lecteur. Pour ce faire, vous devez modifier le <code translate="No">&lt;videos-js&gt;</code> les attributs de la balise et utilisez le <code translate="No">bc()</code> méthode pour initialiser le lecteur. Notez que la méthode peut prendre l'ID du joueur ou l'élément de lecteur lui-même comme argument.</p>
    <aside class="bcls-aside bcls-aside--information">Remarque : Si vous souhaitez ajouter dynamiquement le lecteur entier, le <a href="/code-samples/brightcove-player-sample-loading-player-dynamically.html">Exemple de lecteur Brightcove: Chargement dynamique du lecteur</a> le document contient des instructions pour le faire.</aside>
  </section>
  <section id="Modify_video-js_tag" class="bcls-section">
    <h2>Modifier la balise video-js</h2>
    <aside class="bcls-aside bcls-aside--information player-only">Remarque : Si vous êtes client Brightcove Player, vous n'utiliserez pas <code translate="No">data-video-id</code> cet attribut pour attribuer une vidéo à votre lecteur. Vous devez soit attribuer la vidéo dans le <strong>Joueurs</strong> module, utilisez curl ou le <code translate="No">src</code> méthode (qui est utilisée dans ce document).</aside>
    <p>Lorsque vous retardez l'instanciation du lecteur, vous NE POUVEZ PAS utiliser tous les <code translate="No">&lt;video-js&gt;</code> les attributs de la balise, ou le joueur sera instancié. Vous devez supprimer trois des attributs du code avancé standard (incorporé dans la page). Les attributs qui doivent être supprimés sont:</p>
    <ul>
      <li><code translate="No">data-account</code></li>
      <li><code translate="No">data-player</code></li>
      <li><code translate="No">data-video-id</code></li>
    </ul>
    <p>Cela laisse les attributs suivants dans le <code translate="No">&lt;video-js&gt;</code> marque:</p>
    <ul>
      <li><code translate="No">data-embed</code></li>
      <li><code translate="No">class</code></li>
      <li><code translate="No">controls (optional)</code></li>
    </ul>
    <p>La raison pour laquelle les attributs doivent être supprimés car l'un de ces trois attributs demeure, cela provoquera l'instanciation de Brightcove Player.</p>
    <p>Le code avancé utilisé doit être modelé sur l'extrait de code suivant. Notez qu'un <code translate="No">id</code> est ajouté à la balise.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-embed="default"
  class="video-js" controls&gt;&lt;/video-js&gt;

&lt;script src="https://players.brightcove.net/1507807800001/5e28670f-28ce-4ed6-8809-227784965834_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
    <p>Ces modifications apportées au code avancé et au code JavaScript ci-dessous fonctionnent ensemble pour retarder l'instanciation du lecteur.</p>
  </section>
  <section class="bcls-section">
    <h2 id="JavaScript_used">JavaScript utilisé</h2>
    <p>Une pratique très courante consiste à utiliser un code similaire au suivant pour se préparer à interagir par programmation avec le lecteur:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
});</code></pre>
    <p>Cette approche ne peut pas être utilisée car elle instancierait le joueur. Au lieu de cela, vous utiliserez le <code translate="No">bc()</code> méthode pour instancier le lecteur APRÈS que d'autres préférences aient été définies. Ce <code translate="No">bc()</code> est utilisée pour créer une nouvelle instance de Brightcove Player et est normalement appelée automatiquement lors de l'utilisation de <code translate="No">&lt;video-js&gt;</code> tag, à moins que les étapes détaillées ici ne soient suivies.</p>
    <div class="video-cloud-only">
      <ul>
        <li>Lignes 2-3 : Déclarez une variable pour le joueur et récupérez l' <code translate="No">video-js</code> élément.</li>
        <li>Lignes 4 à 5 : Utilisez la <code translate="No">setAttribute()</code> méthode JavaScript pour définir le <code translate="No">data-account</code> et <code translate="No">data-player</code>. Ceci est important pour le suivi des analyses et d'autres services.</li>
        <li>Ligne 6 : Utilise la <code translate="No">setAttribute()</code> méthode JavaScript pour définir l'ID vidéo.</li>
        <li>Ligne 9 : Utilise la <code translate="No">bc()</code> méthode pour initialiser le lecteur.</li>
        <li>Lignes 12-15: Lecture programmatique de la vidéo. En attendant que l' <code translate="No">loadedmetadata</code> événement soit distribué, la vidéo a été récupérée par le catalogue avant d'essayer de la lire.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  var myPlayer,
    vTag = document.getElementById('myPlayerID');
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');
  vTag.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = <span class="bcls-highlight">bc(vTag)</span>;

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
    </div>
    <div class="player-only">
      <ul>
        <li>Lignes 2-3 : Déclarez une variable pour le joueur et récupérez l' <code translate="No">video-js</code> élément.</li>
        <li>Lignes 4 à 5 : Utilisez la <code translate="No">setAttribute()</code> méthode JavaScript pour définir le <code translate="No">data-account</code> et <code translate="No">data-player</code>. Ceci est important pour le suivi des analyses et d'autres services.</li>
        <li>Ligne 8 : Utilise le <code translate="No">bc()</code> méthode pour initialiser le lecteur.</li>
        <li>Ligne 10 : Définit la valeur <code translate="No">src</code> pour le joueur. Il est <strong>très important de définir</strong> à la fois l'objet source <code translate="No">src</code> et <code translate="No">type</code> pour l'objet source. Des problèmes peuvent survenir dans certains navigateurs si la première option de l'ordre de la technologie de lecture ne correspond pas au type de vidéo.</li>
        <li>Ligne 13 : Lit la vidéo par programme. Bien sûr, cela n'est pas nécessaire.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  var myPlayer,
    vTag = document.getElementById('myPlayerID');
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = <span class="bcls-highlight">bc(vTag)</span>;

  myPlayer.src({ src: "//solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8", type: "application/x-mpegURL"});
  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.muted(true);
  myPlayer.play();
&lt;/script&gt; </code></pre>
    </div>
    <aside class="bcls-aside bcls-aside--tip">
      <p>Alternativement, si vous êtes à l'aise pour adresser des éléments directement par ID, vous pouvez utiliser ce code plus concis:</p>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  var myPlayer;
  myPlayerID.setAttribute('data-account', 1507807800001);
  myPlayerID.setAttribute('data-player', 'BdGVdOd36');
  myPlayerID.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc('myPlayerID');

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
    </aside>
    <h4>Non <code translate="No">id</code> sur le joueur</h4>
    <p>Si, pour une raison quelconque, vous ne souhaitez pas utiliser <code translate="No">id</code> avec votre lecteur, vous pouvez utiliser le code suivant pour retarder l'instanciation.</p>
    <div class="video-cloud-only">
      <ul>
        <li>Lignes 3 à 4 : Déclarez une variable pour le joueur et obtenez le <code translate="No">video-js</code> élément.</li>
        <li>Lignes 7 à 8 : Utilisez le JavaScript <code translate="No">setAttribute()</code> méthode pour définir le <code translate="No">data-account</code> et <code translate="No">data-player</code>. Ceci est important pour le suivi des analyses et d'autres services.</li>
        <li>Ligne 9 : Utilise le JavaScript <code translate="No">setAttribute()</code> méthode pour définir l'ID vidéo.</li>
        <li>Ligne 12 : Utilise le <code translate="No">bc()</code> méthode pour initialiser le lecteur.</li>
        <li>Lignes 15 à 18: Lit la vidéo par programme. En attendant le <code translate="No">loadedmetadata</code> l'événement à envoyer garantit que la vidéo a été récupérée par le catalogue avant d'essayer de la lire.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  // Retrieve the element by tag name, returns an array so use the zeroth array element
  var myPlayer,
    vTag = document.getElementsByTagName('video-js')[0];

  // Assign the needed attributes
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');
  vTag.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc(vTag);

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
    </div>
    <div class="player-only">
      <ul>
        <li>Lignes 3-4: Déclarez une variable pour le joueur et obtenez le <code translate="No">video-js</code> élément.</li>
        <li>Lignes 7 à 8 : Utilisez le JavaScript <code translate="No">setAttribute()</code> méthode pour définir le <code translate="No">data-account</code> et <code translate="No">data-player</code>. Ceci est important pour le suivi des analyses et d'autres services.</li>
        <li>Ligne 11 : Utilise le <code translate="No">bc()</code> méthode pour initialiser le lecteur.</li>
        <li>Ligne 13 : Définit le <code translate="No">src</code> pour le joueur. Il est <strong>très important de définir</strong> à la fois l'objet source <code translate="No">src</code> et <code translate="No">type</code> pour l'objet source. Des problèmes peuvent survenir dans certains navigateurs si la première option dans l'ordre de la technologie de lecture ne correspond pas au type de vidéo.</li>
        <li>Ligne 16 : Lit la vidéo par programme. Bien sûr, ce n'est pas obligatoire.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script type="text/javascript"&gt;
  // Retrieve the element by tag name, returns an array so use the zeroth array element
  var myPlayer,
    vTag = document.getElementsByTagName('video-js')[0];

  // Assign the needed attributes
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc('vTag');

  myPlayer.src({ src: "//solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8", type: "application/x-mpegURL"});
  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.muted(true);
  myPlayer.play();
&lt;/script&gt; </code></pre>
    </div>
  </section>
  <section class="bcls-section">
    <h2 id="CSAI_with_SSAI_ad_failover">CSAI avec basculement publicitaire SSAI</h2>
    <p>Lorsque le basculement publicitaire est activé, le Brightcove Player détecte si un bloqueur de publicité est présent dans le navigateur. Sinon, vos publicités côté client (CSAI) sont lues. Si un bloqueur de publicités est détecté, le lecteur demande automatiquement vos publicités côté serveur (SSAI). Pour plus de détails, consultez le <a href="https://ssai.support.brightcove.com/vod/guides/ssai-ad-block-detection-and-auto-failover.html">SSAI: Détection des blocs publicitaires et basculement automatique</a> document.</p>
    <p>Par défaut, appeler le <code translate="No">bc()</code> La méthode force le lecteur à s'initialiser immédiatement. Si vous souhaitez utiliser le basculement publicitaire avec le <code translate="No">bc()</code> méthode, vous devez attendre que le joueur vérifie si un bloqueur de publicité est présent. Vous pouvez le faire avec le code suivant:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">bc.usingAdBlocker().then(function() {
  // The promise callback receives a true/false result, which is stored
  // internally, so future bc() calls will use it. There is no need to
  // handle it yourself.
  //
  // You can pass custom arguments to bc, as normal, if needed.
  bc();
});</code></pre>
    <h3>Exemple</h3>
    <p>Voici un exemple de code.</p>
    <h4>HTML</h4>
    <p>Ceci est le HTML pour l'exemple.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
	data-embed="default"
	data-application-id
	class="video-js"
	controls
	width="640"
	height="360"&gt;&lt;/video-js&gt;
&lt;script src="//players.brightcove.net/1752604059001/W6RmT8TVL_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
    <h4>JavaScript</h4>
    <p>Ceci est le JavaScript pour l'exemple.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script type="text/javascript"&gt;
  // +++ Define the player options +++
  var options = {
    controlBar: {
      volumePanel: {
        inline: false,
        vertical: true
      }
    }
  };

  // +++ Add the player attributes +++
  var myPlayer,
		myPlayerEl = document.getElementById("myPlayerID");
  myPlayerEl.setAttribute('data-account', 1752604059001);
  myPlayerEl.setAttribute('data-player', 'W6RmT8TVL');
  myPlayerEl.setAttribute('data-video-id', 5802784116001);

  // +++ Create the player +++
  bc.usingAdBlocker().then(function() {
    myPlayer = bc(myPlayerEl, options);

    // +++ Optionally, mute and start playback +++
    myPlayer.on('loadedmetadata',function(){
      myPlayer.muted(true);
      myPlayer.play();
    });
  });
&lt;/script&gt;</code></pre>
  </section>
</article>