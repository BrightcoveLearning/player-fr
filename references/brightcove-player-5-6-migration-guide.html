---
title: Guide de migration de Brightcove Player 5 vers 6
parent: References
---

<article class="bcls-article">
  <h1>Guide de migration de Brightcove Player 5 à 6</h1>
  <summary>Dans cette rubrique, vous découvrirez les problèmes lors de la migration de Brightcove Player version 5 vers la version 6.</summary>
  <section class="bcls-section">
    <h2 id="Overview">Présentation</h2>
    <p >Alors que les modifications incompatibles avec les versions antérieures de Video.js 6 sont documentées sur le <a href="//github.com/videojs/video.js/wiki/Video.js-6-Migration-Guide">Wiki Video.js</a> , ce document peut être utilisé pour des directives de migration supplémentaires spécifiques à Brightcove Player 6 qui ne s'appliquent pas à la migration de Video.js 5 à 6.</p>
    <p >Un élément important du Brightcove Player 5 était le plugin de compatibilité, déclenché par la valeur de configuration du lecteur:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">"compatibility": true</code></pre>
    <p >Cette configuration est activée par défaut pour les lecteurs 5.x. Son effet est d'inclure un plugin qui «shimera» l'API Video.js 4, ce qui a permis à davantage de plugins clients et d'intégrations de fonctionner de manière transparente dans la mise à jour automatique de Brightcove Player 5.</p>
    <p >À partir de Brightcove Player 6, cette cale ne fait plus partie du lecteur. Toute personne souhaitant mettre à jour de 5 à 6 doit s'assurer que son code est compatible avec l'API Video.js 6 en suivant la documentation susmentionnée sur le <a href="//github.com/videojs/video.js/wiki/Video.js-6-Migration-Guide">Wiki Video.js</a>. Les sections suivantes documentent les modifications que vous devrez prendre en compte lors de la mise à jour.</p>
  </section>
  <section class="bcls-section">
    <h2 id="player-tech">player.tech</h2>
    <p >Dans la version 6 de Brightcove Player, <code translate="No">player.tech</code> est une fonction qui renvoie la technologie de lecture actuelle, pas une propriété du lecteur comme dans la version 5. Le shim a mappé certaines propriétés de l'objet tech sur la fonction tech afin que le code s'attende <code translate="No">player.tech</code> être l'objet technologique ne jetterait pas d'erreurs.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Player_sizing">Taille du joueur</h2>
    <p >Dans Video.js 4, le lecteur était dimensionné via JavaScript. Video.js 5 a introduit un nouveau schéma de dimensionnement basé sur CSS qui a causé des problèmes avec les dimensions du lecteur. La cale a annulé ces changements, de sorte qu'ils se comportent davantage comme ils le faisaient dans la version 4.</p>
    <p >En pratique, lorsque vous utilisez Brightcove Player v6, le <code translate="No">height</code> et <code translate="No">width</code> sur la balise vidéo sont mesurés en pixels <strong>seulement</strong>. En fait, vous n'entrez aucune unité pour le <code translate="No">height</code> et <code translate="No">width</code> les attributs:</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">width="480"</code></pre>
    <p >Vous pouvez définir la largeur et la hauteur sur <strong>100%</strong> dans la version 5, cela ne fonctionne plus dans la version 6. Vous pouvez accomplir cela en utilisant CSS de deux manières différentes:</p>
    <ul>
      <li>Utilisation d'un <code translate="No">style</code> attribut dans la <code translate="No">video</code> balise.
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js data-video-id="5622718636001"
  data-account="1507807800001"
  data-player="default"
  data-embed="default"
  data-application-id
  class="video-js"
  controls
  <span class="bcls-highlight">style="width: 100%;height: 100%"</span>&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1507807800001/default_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
      </li>
      <li>Utiliser une <code translate="No">style</code> balise.
        <pre class="line-numbers">
  <code class="language-html" translate="No">...
  <span class="bcls-highlight">&lt;style&gt;
      .video-js {
        height: 100%;
        width: 100%;
      }
  &lt;/style&gt;</span>
  ...
  &lt;video-js data-account="1752604059001"
    data-player="H1xW7NWcz"
    data-embed="default"
    data-application-id
    class="video-js"
    controls&gt;&lt;/video-js&gt;
  &lt;script src="https://players.brightcove.net/1752604059001/H1xW7NWcz_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
      </li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">Si vous utilisez uniquement des pourcentages et que le joueur ne se trouve pas dans un conteneur dont la hauteur est définie, il est possible que vous ne le voyiez pas car la hauteur est nulle. Assurez-vous que le conteneur parent du joueur a une hauteur définie.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="Component_constructors">Constructeurs de composants</h2>
    <p >Dans Video.js 4 et la version 5 via le shim, les constructeurs de composants (tels que <code translate="No">Player</code> et <code translate="No">ControlBar</code> ) étaient disponibles en tant que propriétés du <code translate="No">videojs</code> fonction:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No"> videojs.${ComponentName}</code></pre>
    <p >Ce n'est plus le cas. le <code translate="No">videojs.getComponent</code> la fonction doit être utilisée à la place:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var ControlBar = videojs.getComponent('ControlBar');</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="SliderHandle_component">Composant SliderHandle</h2>
    <p >Ce composant n'était pas dans le lecteur 5.x, mais a été restauré via le shim pour les utilisateurs qui l'étendaient. Il est maintenant entièrement supprimé.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Properties/Methods_and_alternatives">Propriétés / Méthodes et alternatives</h2>
    <p >Vous trouverez ci-dessous un certain nombre de propriétés Video.js de 4.x qui ont été copiées dans 5.x par le shim de compatibilité. Ils ne sont plus présents dans 6.x, mais des alternatives sont fournies:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Supprimé</th>
          <th>Alternative</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>vjs</td>
          <td>videojs</td>
        </tr>
        <tr>
          <td>videojs.JSON</td>
          <td>JSON</td>
        </tr>
        <tr>
          <td>videojs.USER_AGENT</td>
          <td>window.navigator.userAgent</td>
        </tr>
        <tr>
          <td>videojs.EventEmitter</td>
          <td>videojs.EventTarget</td>
        </tr>
        <tr>
          <td>videojs.obj.isArray</td>
          <td>Array.isArray</td>
        </tr>
        <tr>
          <td>videojs.round (nombre, chiffres)</td>
          <td>Numéro (nombre à fixe (chiffres))</td>
        </tr>
        <tr>
          <td>videojs.trim (str)</td>
          <td>str.trim ()</td>
        </tr>
        <tr>
          <td>videojs.util.mergeOptions</td>
          <td>videojs.mergeOptions</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="bcls-section">
    <h2 id="Creating_a_custom_plugin">Créer un plugin personnalisé</h2>
    <p >Dans la version 5 de Brightcove Player, lorsque vous avez créé un plugin personnalisé, la première ligne du plugin utilisait le <code translate="No">videojs.plugin()</code> méthode. Par exemple :</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.plugin('scrollIntoView', function() {
  var myPlayer = this,
    isAdPlaying = false;
  ...</code></pre>
    <p >Vous devez maintenant utiliser le <code translate="No">videojs.registerPlugin()</code> méthode à la place. Par exemple :</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('scrollIntoView', function() {
  var myPlayer = this,
    isAdPlaying = false;</code></pre>
    <p >Bien que <code translate="No">videojs.plugin()</code> est obsolète dans la version 6, s'il est utilisé, il n'y aura pas d'erreur mais vous verrez un avertissement dans la console. Vous ne pouvez pas utiliser <code translate="No">videojs.registerPlugin()</code> avec les joueurs de la version 5.</p>
    <aside class="bcls-aside bcls-aside--tip">Si vous constatez que vous devez utiliser un plugin avec les deux versions du lecteur, vous pouvez utiliser cette technique pour fournir une compatibilité croisée Video.js 5/6 :
      <pre class="line-numbers">
<code class="language-javascript" translate="No">var registerPlugin =   videojs.registerPlugin || videojs.plugin;
registerPlugin('pluginName', function(){
  ...
});</code></pre>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="IMA3_plugin">Plug-in IMA3</h2>
    <p>Après la mise à niveau vers Brightcove Player 6, vous devrez réinstaller manuellement le plugin IMA3 à l'aide de Studio. Voir le <a href="/advertising/step-step-implementing-advertising.html">Pas à pas: Mise en œuvre de la publicité</a> document pour plus de détails.</p>
    <p>Si vous êtes à l'aise avec <a href="https://apis.support.brightcove.com/player-management/">API de gestion des joueurs</a> , vous pouvez également mettre à jour le plugin IMA3 à l'aide de curl. Plus précisément, voici la référence API à <a href="https://apis.support.brightcove.com/player-management/references/reference.html#operation/UpdatePlayer">Mettre à jour un joueur</a>. Notez que cela peut être fait dans le même&nbsp;Appel de l'API de gestion du lecteur que vous utilisez pour mettre à niveau le lecteur.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Flash_HLS_and_crossdomain.xml">Flash HLS et crossdomain.xml</h2>
    <p >Dans certains cas particuliers, lorsque vous utilisez une version 6.13.0 et ultérieure de Brightcove Player, vous devrez utiliser un <strong>crossdomain.xml</strong> fichier. Cela sera nécessaire lorsque:</p>
    <ul>
      <li>Vous utilisez votre ou vos propres CDN.</li>
      <li>Vous utilisez Brightcove Player de telle manière qu'il doit utiliser Flash. Voir le <a href="/playback/determining-which-rendition-will-play.html">Déterminer quel rendu jouera</a> document pour savoir quand cela pourrait se produire.</li>
    </ul>
    <p >Si ces critères sont remplis, vous devrez utiliser un <strong>crossdomain.xml</strong> fichier dans le domaine racine à partir duquel le média est servi Par exemple, si vous diffusez du contenu à partir de</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://www.domain.com/media/video.m3u8</code></pre>
    <p >puis un <strong>crossdomain.xml</strong> le fichier doit exister sur</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://www.domain.com/crossdomain.xml</code></pre>
    <p >Puisque le swf du joueur est hébergé sur <code translate="No">players.brightcove.net</code> , il est recommandé d'utiliser <code translate="No">*.brightcove.net</code>. Un exemple <strong>crossdomain.xml</strong> apparaît comme suit:</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0"?&gt;
&lt;cross-domain-policy&gt;
&lt;allow-access-from domain="*.brightcove.net" /&gt;
&lt;/cross-domain-policy&gt;</code></pre>
    <p >Vous devrez fournir le (s) domaine (s) approprié (s). Pour plus de détails, consultez <a href="https://code.tutsplus.com/tutorials/quick-tip-a-guide-to-cross-domain-policy-files--active-3832">Conseil rapide: Guide des fichiers de stratégie interdomaines</a>.</p>
    <h3>Travailler avec HTTPS</h3>
    <p >Lorsque vous chargez un élément HTTPS à partir d'une page HTTP ou vice versa, vous devez inclure le <code translate="No">secure</code> attribut avec une valeur de <code translate="No">false</code> comme suit:</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0"?&gt;
&lt;cross-domain-policy&gt;
&lt;allow-access-from domain="*.brightcove.net" secure="false"/&gt;
&lt;/cross-domain-policy&gt;</code></pre>
  </section>
</article>